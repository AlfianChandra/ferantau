import{d as E,h as t,k as N,r as T,o as w,c as _,a as o,e as a,n as f,u as v,m as V,A,w as U,p as $,l as j,F as P}from"./index-M5Ua6xv2.js";import{u as q}from"./theme-B0435eda.js";import{_ as y}from"./InputView.vue_vue_type_style_index_0_lang-BRqQvvTG.js";import{a as F,_ as I,B as L}from"./ThemeSetting.vue_vue_type_style_index_0_lang-ST-vFrjS.js";import{m as O}from"./formValidator-OdL4bhgE.js";import{_ as z}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-Db7qOyKe.js";import{a as D}from"./axios-BimPEqV4.js";const G={class:f(["bl-wrapper"])},K={class:"bl-opt"},M={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-start","margin-bottom":"1rem"}},W={class:"form-group"},H={key:0,class:"lgwait-overlay"},se=E({__name:"LoginView",setup(J){const{vPassword:g,vEmail:b,checkValidation:x}=O(),i=t(!1),r=q(),l=t(""),n=t(""),c=t(!0),m=t(""),d=t(""),k=[m,d];m.value=b(l).message,d.value=g(n).message,N([l,n],()=>{m.value=b(l).message||"",d.value=g(n).message||"",c.value=x(k)},{immediate:!0});const u=t(!1),S=async()=>{if(u.value=!0,!c.value){const h={username:l.value,password:n.value};try{const e=await D.post(V.baseEnd+"api/Auth/login",h),p=e.data.message,s=e.data.auth.token,C=e.data.auth.id;r.notifyAlertSuccess("Berhasil",p,"OK",()=>{localStorage.setItem("authToken",s),localStorage.setItem("userid",C),window.location.href="/Dashboard"}),u.value=!1}catch(e){e.response&&(r.notifyAlertError("Gagal",e.response.data.message,"Oke",()=>{}),u.value=!1)}}},B=()=>{i.value=!i.value};return(h,e)=>{const p=T("font-awesome-icon");return w(),_(P,null,[o(F,{visible:i.value,"onUpdate:visible":e[0]||(e[0]=s=>i.value=s)},null,8,["visible"]),a("div",G,[a("div",{class:f(["bl-inner",v(r).mTheme])},[a("div",K,[o(I),a("a",{class:f([v(r).textTheme]),onClick:B,href:"javascript:void(0)"},[o(p,{icon:"gear"})],2)]),a("div",M,[o(L,{style:{"padding-left":"1rem"},"site-name":v(V).appName},null,8,["site-name"])]),a("form",{onSubmit:A(S,["prevent"])},[o(y,{"in-label":"E-mail / Username","in-placeholder":"example@email.com","in-type":"text","in-required":!0,"in-helper":m.value,modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value=s)},null,8,["in-helper","modelValue"]),o(y,{"in-label":"Password","in-placeholder":"","in-type":"password","in-required":!0,"in-helper":d.value,modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s)},null,8,["in-helper","modelValue"]),a("div",W,[o(z,{"bt-type":"submit","bt-disabled":c.value},{default:U(()=>e[3]||(e[3]=[$("Sign-in")])),_:1},8,["bt-disabled"])])],32)],2)]),u.value?(w(),_("div",H,e[4]||(e[4]=[a("div",{class:"lgwait-inner"},[a("img",{style:{width:"200px",height:"200px","object-fit":"cover"},src:"https://cdn.dribbble.com/users/1186261/screenshots/3718681/media/1df2396f1eaa146bcb7dd3e73c1dc77b.gif"}),a("p",null,"Please wait")],-1)]))):j("",!0)],64)}}});export{se as default};
