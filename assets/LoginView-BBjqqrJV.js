import{d as S,h as l,k as B,r as E,o as C,c as T,a as s,e as t,n as f,u as c,m as h,A,w as N,p as U,F as $}from"./index-NkV-h5IJ.js";import{u as j}from"./theme-CXhRrftG.js";import{_ as w}from"./InputView.vue_vue_type_style_index_0_lang-DwS3iKGO.js";import{a as q,_ as F,B as I}from"./ThemeSetting.vue_vue_type_style_index_0_lang-eZG7cYF8.js";import{m as L}from"./formValidator-OdL4bhgE.js";import{_ as O}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-CGbNGcfJ.js";import{a as P}from"./axios-BimPEqV4.js";const z={class:f(["bl-wrapper"])},G={class:"bl-opt"},K={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-start","margin-bottom":"1rem"}},M={class:"form-group"},Z=S({__name:"LoginView",setup(D){const{vPassword:v,vEmail:_,checkValidation:b}=L(),i=l(!1),r=j(),o=l(""),n=l(""),u=l(!0),m=l(""),d=l(""),V=[m,d];m.value=_(o).message,d.value=v(n).message,B([o,n],()=>{m.value=_(o).message||"",d.value=v(n).message||"",u.value=b(V)},{immediate:!0});const y=async()=>{if(!u.value){const g={username:o.value,password:n.value};try{const e=await P.post(h.baseEnd+"api/Auth/login",g),p=e.data.message,a=e.data.auth.token,k=e.data.auth.id;r.notifyAlertSuccess("Berhasil",p,"OK",()=>{localStorage.setItem("authToken",a),localStorage.setItem("userid",k),window.location.href="/fol/playback"})}catch(e){e.response&&r.notifyAlertError("Gagal",e.response.data.message,"Oke",()=>{})}}},x=()=>{i.value=!i.value};return(g,e)=>{const p=E("font-awesome-icon");return C(),T($,null,[s(q,{visible:i.value,"onUpdate:visible":e[0]||(e[0]=a=>i.value=a)},null,8,["visible"]),t("div",z,[t("div",{class:f(["bl-inner",c(r).mTheme])},[t("div",G,[s(F),t("a",{class:f([c(r).textTheme]),onClick:x,href:"javascript:void(0)"},[s(p,{icon:"gear"})],2)]),t("div",K,[s(I,{style:{"padding-left":"1rem"},"site-name":c(h).appName},null,8,["site-name"])]),t("form",{onSubmit:A(y,["prevent"])},[s(w,{"in-label":"E-mail / Username","in-placeholder":"example@email.com","in-type":"text","in-required":!0,"in-helper":m.value,modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value=a)},null,8,["in-helper","modelValue"]),s(w,{"in-label":"Password","in-placeholder":"","in-type":"password","in-required":!0,"in-helper":d.value,modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=a=>n.value=a)},null,8,["in-helper","modelValue"]),t("div",M,[s(O,{"bt-type":"submit","bt-disabled":u.value},{default:N(()=>e[3]||(e[3]=[U("Sign-in")])),_:1},8,["bt-disabled"])])],32)],2)])],64)}}});export{Z as default};
