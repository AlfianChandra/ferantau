import{u as me}from"./theme-Bbv4sm2S.js";import{d as De,i as we}from"./index-B5d4h4Xc.js";import{_ as _e}from"./MainWrapperView.vue_vue_type_style_index_0_lang-C4R3sMlx.js";import{_ as ve}from"./SelectView.vue_vue_type_style_index_0_lang-CrPtWUQ-.js";import{_ as z}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-DY5faFol.js";import{d as pe,c as V,G as ae,e as l,f as X,u as _,a as s,r as ye,n as le,t as K,H as $e,o as T,R as Y,w,N as n,Q as U,O as xe,P as Ie,_ as Me,F as ce,L as ke,U as Ce,b as be,K as he}from"./index-B73MKg9L.js";import{u as fe}from"./http-WjuO1N5T.js";import{u as Ae}from"./spotModel-C5GsX3fi.js";import{_ as W}from"./InputView.vue_vue_type_style_index_0_lang-SuD45mof.js";import{_ as Oe}from"./BatteryView.vue_vue_type_style_index_0_computed_true_lang-YiH4s7Rv.js";import"./moment-C5S46NFB.js";const Ve={key:0,class:"mod-overlay"},Pe={class:"mod-heading"},Fe={class:"mod-body"},ge=pe({__name:"ModalEditorView",props:{modTitle:{type:String,required:!0},modShow:{type:Boolean,default:!0}},emits:["update:modShow"],setup(j,{emit:Q}){const x=me(),D=j,c=Q,S=()=>{c("update:modShow",!D.modShow)};return(R,$)=>{const p=ye("font-awesome-icon");return j.modShow?(T(),V("div",Ve,[l("div",{class:le(["mod-content",_(x).mTheme])},[l("button",{onClick:S,type:"button",class:"mod-dismiss",style:X({color:_(x).accentColor})},[s(p,{icon:"times"})],4),l("div",Pe,[l("h4",{class:le(_(x).textTheme)},[l("b",null,K(j.modTitle),1)],2)]),l("div",Fe,[$e(R.$slots,"default")])],2)])):ae("",!0)}}}),Le={class:"itemlist-wrapper"},Ne={class:"itemlist-group"},Ue=pe({__name:"ItemList",props:{itemName:{type:String,required:!0},itemDesc:{type:String,required:!0},itemId:{type:String,required:!0},itemSafemark:{type:Number,default:0,required:!0}},emits:["onItemSelect"],setup(j,{emit:Q}){const x=me(),D=Q,c=j,S=()=>{D("onItemSelect",{id:c.itemId,name:c.itemName,desc:c.itemDesc})};return(R,$)=>{const p=ye("font-awesome-icon");return T(),V("div",Le,[l("div",Ne,[l("span",{style:X({color:_(x).accentColor})},[l("b",null,K(j.itemName),1)],4),l("span",{style:X({color:_(x).accentColor})},[s(p,{icon:"map-pin"}),Y(" "+K(j.itemDesc),1)],4)]),s(z,{onClick:S,"bt-disabled":!1,"bt-size":"small"},{default:w(()=>[s(p,{icon:"plus"})]),_:1})])}}}),Re={class:"chart-container"},qe={class:"col-md-4"},ze={class:"loaderparent"},je=pe({__name:"LiveMonitorChart",props:{dateFilter:{type:String,required:!0},timeFilter:{type:Number,required:!0}},setup(j){const Q=j,x=n(!0),D=n(null),c=n(null),S=me(),R=n(15),$=n([]),p=n(0),h=n("Building chart..."),M=n("Initializing..."),k=n(0),P=n({tooltip:{trigger:"axis",axisPointer:{type:"cross"}}}),t=f=>new Date(f).toISOString(),v=async()=>new Promise((f,y)=>{fe().httpGet("api/Spot/getspots").then(b=>{f(b)}).catch(b=>{console.error(b),y(b)})});U(()=>D.value,async()=>{F(),await v().then(f=>{$.value=f})});const F=()=>{if(p.value=5,D.value){const f=we(D.value);c.value=f,c.value.setOption(P.value)}},B=async()=>new Promise(async(f,y)=>{try{const b=[],H=new Set,q=$.value.length;let ee=0;M.value="Setting up...";for(let g=0;g<$.value.length;g++){M.value=`Applying filter for ${$.value[g].spotName}...`;const E={id:$.value[g].id+"",date:t(Q.dateFilter),timespan:Q.timeFilter+"",firstrequest:x.value},C=await fe().httpPost("api/Data/getsingledata",E);for(let G=0;G<C.length;G++)setTimeout(()=>{k.value++},1);const Z=C.map(G=>{const se=G.timestamp.replace(".",":").split("T")[1],[re,ue]=se.split(":"),m=`${re}:${ue}`;return H.add(m),m}),I=C.map(G=>parseFloat(G.psiValue));b.push({psies:I,categories:Z}),ee+=1;const L=ee/q*90;p.value=Math.round(L)}const J=Array.from(H).sort((g,E)=>{const[C,Z]=g.split(":").map(Number),[I,L]=E.split(":").map(Number);return C!==I?C-I:Z-L}),oe=b.map((g,E)=>{const C={};g.categories.forEach((I,L)=>{C[I]=g.psies[L]});const Z=J.map(I=>C[I]!==void 0?parseFloat(C[I]):null);return{name:`${$.value[E].spotName}`,type:"line",data:Z,smooth:!1,sampling:"average",symbol:"none",lineStyle:{width:1.5},endLabel:{show:!0,fontSize:12,color:"#fff",offset:[-5,0],padding:3,borderRadius:3,textBorderWidth:0,backgroundColor:"inherit",formatter:function(I){let L=0;const G=b[I.seriesIndex].psies.length;for(let te=0;te<G;te++)b[I.seriesIndex].psies[te]!==null&&(L=b[I.seriesIndex].psies[te]);return L.toFixed(2)}}}}),A={backgroundColor:"transparent",legend:{data:oe.map(g=>({name:g.name,icon:"circle",textStyle:{color:"inherit"}}))},xAxis:{type:"category",data:J,scale:!0,alignTicks:!0,name:"Time",axisPointer:{value:"2016-10-7",snap:!0,label:{show:!0,formatter:function(g){return g.value}},handle:{show:!0}},axisTick:{show:!0,alignWithLabel:!0},axisLabel:{color:`${S.accentColor}`,rotate:-45,interval:g=>{const[E,C]=J[g].split(":").map(Number);return C%R.value===0},formatter:function(g){return g}},boundaryGap:!0,splitLine:{show:!0,lineStyle:{color:"#55555555"}}},yAxis:{type:"value",axisTick:{show:!0},axisLine:{show:!0},scale:!0,splitLine:{show:!0,lineStyle:{color:"#55555555"}}},series:oe};f(A)}catch(b){console.error(b),y(b)}});return U(()=>$.value,async()=>{await B().then(f=>{c.value.setOption(f),M.value="Drawing series...",p.value=99.99,setTimeout(()=>{p.value=100,k.value=0},2e3)})}),U(()=>R.value,async()=>{p.value=5,M.value="Setting up...",h.value="Options & filter updated. Rebuilding chart with new series...",c.value&&(c.value=null),F(),setTimeout(async()=>{await B().then(f=>{c.value.setOption(f),p.value=99.99,M.value="Drawing series...",setTimeout(()=>{p.value=100,k.value=0},2e3)})},1e3)}),xe(()=>{F()}),Ie(()=>{D.value&&De(D.value)}),(f,y)=>(T(),V("div",Re,[y[3]||(y[3]=l("h4",{style:{padding:"15px"}},"Live Monitor Chart",-1)),l("div",qe,[s(ve,{"in-label":"X-Axis Time Split","model-value":R.value,"onUpdate:modelValue":y[0]||(y[0]=b=>R.value=b)},{default:w(()=>y[1]||(y[1]=[l("option",{value:"5"},"5 Minutes",-1),l("option",{value:"10"},"10 Minutes",-1),l("option",{value:"15"},"15 Minutes",-1),l("option",{value:"30"},"30 Minutes",-1),l("option",{value:"45"},"45 Minutes",-1),l("option",{value:"60"},"1 Hour",-1)])),_:1},8,["model-value"])]),l("div",{ref_key:"chart",ref:D,style:{width:"100%",position:"relative",height:"90%"}},null,512),p.value!=100?(T(),V("div",{key:0,class:le(["chartloader",[`${_(S).mTheme}`]])},[y[2]||(y[2]=l("img",{style:{"border-radius":"1000px"},src:"https://digitalsynopsis.com/wp-content/uploads/2016/06/loading-animations-preloader-gifs-ui-ux-effects-10.gif"},null,-1)),l("span",{class:le([`${_(S).textTheme}`])},K(h.value)+" ("+K(k.value)+" objects collected)",3),l("span",{style:X({color:`${_(S).accentColorSecondary}`})},K(M.value),5),l("div",ze,[l("span",{style:X({width:`${p.value}%`,background:`${_(S).accentColor}`}),class:"loaderinner"},null,4)])],2)):ae("",!0)]))}}),Be=Me(je,[["__scopeId","data-v-3c2666ce"]]),He={style:{display:"flex","flex-flow":"column","margin-bottom":"1rem"}},Ee=["id"],Ge={key:0,style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-end",gap:"0.5rem","margin-bottom":"1.5rem"}},Ye={contenteditable:"true",spellcheck:"false"},We=pe({__name:"ChartView2",props:{filterDate:{type:String,required:!0},filterTime:{type:Number,required:!0},spotId:{type:String,required:!0},chartName:{type:String,required:!0},yMax:{type:Number,required:!0,default:350},yMin:{type:Number,required:!0,default:0},gridview:{type:Boolean,default:!1},tickAmount:{type:Number,default:100},dataFetchInterval:{type:Number,default:1e4},curveType:{type:Boolean,default:!1},safeMark:{type:Number,default:0},isDataPaused:Boolean,showUis:{type:Boolean,default:!0},yInterval:{type:Number,default:0}},emits:["onChartClose","onChartReady","onPause","onResume","onDrawingMode"],setup(j,{emit:Q}){const x=n([]),D=n([]),c=Q,S=me(),R=n(!1),$=n(!0),p=n(null),h=n(null),M=n(!1),k=n(!1);let P;const t=j,v=n(t.safeMark),F=n(!1),B=n(t.yMax),f=n(t.yMin),y=n(t.tickAmount),b=n(50),H=n(t.dataFetchInterval),q=n(t.curveType),ee=n(!0),J=n(!0);function oe(m,i){return{tooltip:{show:!0,trigger:"item",axisPointer:{type:"cross",axis:"auto",label:{show:!0}}},xAxis:[{type:"category",interval:y.value,name:"Time",nameLocation:"middle",nameTextStyle:{fontSize:14},nameGap:45,axisLine:{show:!0,lineStyle:{color:S.accentColor}},splitLine:{show:J,lineStyle:{color:"#ddd",type:"dashed"}},axisTick:{show:!0},boundaryGap:!1,axisLabel:{rotate:45},data:[]}],yAxis:[{type:"value",min:f.value,max:m,name:"PSI",nameTextStyle:{fontSize:14},nameGap:40,nameLocation:"middle",minorTick:{show:!0},axisTick:{show:!0},minorSplitLine:{show:ee,lineStyle:{color:"#ddd",type:"dashed"}},interval:t.yInterval,axisLine:{show:!0,lineStyle:{color:S.accentColor}}}],series:[{name:"PSI Data",type:"line",symbol:"none",data:[],smooth:i,lineStyle:{width:1.2,join:"miter",miterLimit:3,cap:"round"},tooltip:{position:["50%","50%"]},endLabel:{show:!0,distance:0,formatter:function(N){const o=N.dataIndex,e=A.value.series[0].data;console.log(e);let r=0;for(let O=0;O<e.length;O++)e[O]>r&&(r=e[O]);let a=0,d=0;for(let O=0;O<e.length;O++){const u=parseInt(e[O]);(parseInt(t.spotId)==1&&u>=450&&u<=540||parseInt(t.spotId)==2&&u>=430&&u<=475||parseInt(t.spotId)==3&&u>=380&&u<=440||parseInt(t.spotId)==4&&u>=280&&u<=330||parseInt(t.spotId)==5&&u>=190&&u<=225||parseInt(t.spotId)==6&&u>=170&&u<=210||parseInt(t.spotId)==7&&u>=120&&u<=160||parseInt(t.spotId)==8&&u>=50&&u<=90||parseInt(t.spotId)==9&&u>=0&&u<=40)&&(a+=u,d++)}const ne=a/d,ie=e.length-1;if(o===ie){const O=N.value,u=r,de=(u-O)/u*100;return`Curr: ${N.value}
Avg: ${ne.toFixed(2)}
Del: ${de>0?"-"+de.toFixed(2):"+"+de.toFixed(2)}%`}return""},color:"black",backgroundColor:"white",padding:5,borderRadius:5}}]}}U(()=>v.value,()=>{var m;A.value.series[1].markLine.data[0].yAxis=v.value,(m=h.value)==null||m.setOption(A.value)});const A=n(oe(t.yMax,t.curveType));U(()=>[B.value,f.value,y.value,H.value,q.value,b.value,ee.value,J.value],()=>{h.value.setOption(A.value)});const g=()=>{var m;!h.value&&p.value&&(h.value=we(p.value)),(m=h.value)==null||m.setOption(A.value)},E=m=>new Date(m).toISOString(),C=async()=>{var i,N;const m={id:t.spotId+"",date:E(t.filterDate),timespan:t.filterTime+""};try{const e=await fe().httpPost("api/Data/getalldata2",m),r=e.map(d=>{const ie=d.timestamp.replace(".",":").split("T")[1],[O,u]=ie.split(":");return`${O}:${u}`}),a=e.map(d=>parseFloat(d.psiValue).toFixed(2)).map(d=>parseFloat(d));x.value=r,D.value=a,console.log("Categories:",r),console.log("PSI Values:",a),a.length?(M.value=!1,A.value.xAxis[0].data=r,A.value.series[0].data=a,(i=h.value)==null||i.setOption(A.value)):(M.value=!0,$.value=!1,A.value.xAxis[0].data=[],A.value.series[0].data=[],(N=h.value)==null||N.setOption(A.value))}catch(o){console.error("Error fetching chart data:",o)}},Z=()=>{const m=new Date().toISOString().slice(0,10);if(t.filterDate.slice(0,10)!==m){P&&clearInterval(P);return}else P&&clearInterval(P),P=setInterval(()=>{k.value||C()},H.value)};U(()=>p.value,()=>{p.value&&g()}),U(()=>t.gridview,()=>{h.value&&setTimeout(()=>{var m;(m=h.value)==null||m.resize()},500)}),U(()=>t.dataFetchInterval,()=>{H.value=t.dataFetchInterval,Z()}),U(()=>[p.value],()=>{C(),Z()}),Ie(()=>{clearInterval(P)});let I=null;U(()=>[t.filterDate,t.filterTime,t.yMax,t.yMin,t.tickAmount,t.curveType],()=>{I&&clearTimeout(I),I=setTimeout(()=>{B.value=t.yMax,f.value=t.yMin,y.value=t.tickAmount,q.value=t.curveType,H.value=t.dataFetchInterval,A.value=oe(t.yMax,t.curveType),$.value=!0,R.value=!1},300)});let L=null;U(()=>[B.value,f.value,y.value,H.value,q.value],()=>{L&&clearTimeout(L),L=setTimeout(()=>{C()},500)}),S.$subscribe((m,i)=>{setTimeout(()=>{C()},2e3)});const G=()=>{c("onChartClose",t.spotId)},te=()=>{F.value=!F.value},se=()=>{F.value=!1},re=()=>{k.value=!k.value,k.value?c("onPause",t.spotId):c("onResume",t.spotId)};U(()=>[t.isDataPaused],()=>{k.value=t.isDataPaused,k.value?c("onPause",t.spotId):c("onResume",t.spotId)}),U(()=>k.value,()=>{k.value?c("onPause",t.spotId):c("onResume",t.spotId)}),U(()=>S.asideVisible,()=>{h.value&&setTimeout(()=>{var m;(m=h.value)==null||m.resize()},500)});const ue=()=>{c("onDrawingMode",t.spotId)};return xe(()=>{console.log("DATA",t.filterDate)}),(m,i)=>{const N=ye("font-awesome-icon");return T(),V(ce,null,[s(ge,{"mod-show":F.value,"onUpdate:modShow":i[9]||(i[9]=o=>F.value=o),"mod-title":`${t.chartName} Preferences`},{default:w(()=>[s(W,{"in-type":"number","in-label":"Safemark","model-value":v.value,"onUpdate:modelValue":i[0]||(i[0]=o=>v.value=o)},null,8,["model-value"]),s(W,{"in-type":"number","in-label":"Y-Axis Max Tick","model-value":B.value,"onUpdate:modelValue":i[1]||(i[1]=o=>B.value=o)},null,8,["model-value"]),s(W,{"in-type":"number","in-label":"Y-Axis Min Tick","model-value":f.value,"onUpdate:modelValue":i[2]||(i[2]=o=>f.value=o)},null,8,["model-value"]),s(W,{"in-type":"number","in-label":"Y-Axis Interval","model-value":b.value,"onUpdate:modelValue":i[3]||(i[3]=o=>b.value=o)},null,8,["model-value"]),s(W,{"in-type":"number","in-label":"X-Axis Tick Amount","model-value":y.value,"onUpdate:modelValue":i[4]||(i[4]=o=>y.value=o)},null,8,["model-value"]),s(W,{"in-type":"number","in-label":"Data Update Interval (Milisecond)","model-value":H.value,"onUpdate:modelValue":i[5]||(i[5]=o=>H.value=o)},null,8,["model-value"]),s(ve,{"in-label":"Curve Type","model-value":q.value,"onUpdate:modelValue":i[6]||(i[6]=o=>q.value=o)},{default:w(()=>i[10]||(i[10]=[l("option",{value:"true"},"Smooth",-1),l("option",{value:"false"},"Straight",-1)])),_:1},8,["model-value"]),l("div",He,[l("label",null,[ke(l("input",{type:"checkbox","onUpdate:modelValue":i[7]||(i[7]=o=>ee.value=o)},null,512),[[Ce,ee.value]]),i[11]||(i[11]=Y(" Show Y-Axis Minor Split "))]),l("label",null,[ke(l("input",{type:"checkbox","onUpdate:modelValue":i[8]||(i[8]=o=>J.value=o)},null,512),[[Ce,J.value]]),i[12]||(i[12]=Y(" Show X-Axis Split "))])]),s(z,{onClick:se,"bt-type":"button","bt-disabled":!1},{default:w(()=>i[13]||(i[13]=[Y("Dismiss")])),_:1})]),_:1},8,["mod-show","mod-title"]),l("div",{id:`chart${t.spotId}`,style:X({width:t.gridview?_(S).asideVisible?"680px":"600.5px":"100%"}),class:le(["chartwrap",k.value?"chartwrap-paused":""])},[t.showUis?(T(),V("div",Ge,[s(z,{onClick:ue,"bt-type":"button","bt-size":"small","bt-disabled":!1},{default:w(()=>[s(N,{icon:"edit"})]),_:1}),s(z,{onClick:re,"bt-type":"button","bt-size":"small","bt-disabled":!1},{default:w(()=>[s(N,{icon:k.value?"pause":"play"},null,8,["icon"])]),_:1}),D.value.length?(T(),be(z,{key:0,onClick:te,"bt-disabled":!1,"bt-type":"button","bt-size":"small"},{default:w(()=>[s(N,{icon:"sliders"})]),_:1})):ae("",!0),s(z,{onClick:G,"bt-disabled":!1,"bt-type":"button","bt-size":"small"},{default:w(()=>[s(N,{icon:"close"})]),_:1})])):ae("",!0),s(Oe,{"id-spot":parseInt(t.spotId)},null,8,["id-spot"]),l("h4",{style:X({textAlign:"center",color:_(S).accentColor})},[l("b",Ye,"SPOT: "+K(t.chartName),1)],4),D.value.length?(T(),V("p",{key:1,style:{"text-align":"center","margin-bottom":"5px"},class:le(_(S).textTheme)}," Displaying data for last "+K(t.filterTime)+" hour(s) on "+K(t.filterDate),3)):ae("",!0),l("div",{ref_key:"chartRef",ref:p,style:{width:"100%",height:"600px"}},null,512)],14,Ee)],64)}}}),Xe={key:0,class:"live-window"},Ke={key:1,class:"drw-wd"},Qe={class:"row"},Je={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-end"}},Ze={class:"col-md-12"},et={class:"col-md-12"},tt={style:{display:"flex","flex-flow":"row wrap",gap:"0.3rem"}},at={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-end"}},lt={class:"spot-reading-control"},ot={class:"spot-basket"},st=["onClick","onDblclick"],nt={key:0,style:{"margin-top":"1rem",display:"flex","flex-flow":"row nowrap","justify-content":"flex-end"}},bt=pe({__name:"MonitoringFol",setup(j){const Q=Ae(),x=me();x.asideToggle(!0);const D=n(null),c=n(!1),S=n(300),R=n(0),$=n(30),p=n(1e4),h=n(!1),M=n(""),k=n("straight"),P=n(24),t=n(!1),v=n([]),F=n(0),B=()=>{F.value<Object.keys(v.value).length&&setTimeout(()=>{F.value++,B(),console.log("Current Index",F.value)},200)},f=()=>{const o=new Date,e=o.getFullYear(),r=String(o.getMonth()+1).padStart(2,"0"),a=String(o.getDate()).padStart(2,"0"),d=`${e}-${r}-${a}`;M.value=d};xe(async()=>{await Q.getSpots().then(o=>{f(),setTimeout(()=>{v.value=o,console.log("SPOTS",v.value),B()},1e3)})});const y=()=>{t.value=!0},b=o=>{t.value=!1,v.value.some(r=>r[o.id])?x.notifyShowError("Selected spot already displayed"):v.value.push({[o.id]:o})},H=o=>{delete v.value[o]},q=n(!1),ee=()=>{q.value=!q.value},J=()=>{q.value=!1,x.notifyShow("Options has been applied")},oe=o=>{const e=document.getElementById("chart"+o);e&&e.scrollIntoView({behavior:"smooth",block:"start"})},A=()=>{c.value=!c.value},g=o=>{v.value=v.value.filter(e=>!e[o])};let E=n([]);const C=o=>{E.value.push({id:o});const e=`spotdata-${o}`,r=document.querySelector(`.${e}`);r?(r.style.background="red",r.style.color="white"):console.warn(`Element dengan class ${e} gak ditemukan bro!`)},Z=o=>{const e=`spotdata-${o}`,r=document.querySelector(`.${e}`);r?(r.style.background="#000",r.style.color="#fff"):console.warn(`Element dengan class ${e} gak ditemukan bro!`);const a=E.value.findIndex(d=>d.id===o);E.value.splice(a,1)},I=()=>{h.value=!1},L=()=>{h.value=!0},G=o=>new Date(o).toISOString(),te=async o=>new Promise(async(e,r)=>{try{const a={id:o,date:G(M.value),timespan:P.value+"",firstrequest:!1},d=await fe().httpPost("api/Data/getsingledata",a),ne=d.map(O=>{const Se=O.timestamp.replace(".",":").split("T")[1],[de,Te]=Se.split(":");return`${de}:${Te}`}),ie=d.map(O=>parseFloat(O.psiValue).toFixed(2));e({cats:ne,series:ie})}catch(a){r(a)}}),se=n(!1),re=o=>{h.value=!0,se.value=!0,setTimeout(()=>{ue(o)},3e3)},ue=async o=>{const e=we(D.value);await te(o).then(r=>{const a=r.cats,d=r.series,ne={graphic:[{type:"rect",shape:{x:0,y:0,width:e.getWidth(),height:e.getHeight()},style:{fill:"transparent"},onmousemove:function(ie){}}],backgroundColor:"#fff",tooltip:{trigger:"axis"},xAxis:{type:"category",data:a},yAxis:{type:"value",min:0,max:350},series:[{type:"line",data:d,color:a.map(()=>`${x.accentColor}`)}]};e.setOption(ne),e.setOption({yAxis:{name:"Pressure (PSI)"}})})},m=()=>{se.value=!1},i=n(!1),N=()=>{i.value=!i.value,h.value=!h.value};return(o,e)=>{const r=ye("font-awesome-icon");return T(),V(ce,null,[i.value?(T(),V("div",Xe,[l("div",{class:le(["live-window-inner",[`${_(x).mTheme}`]])},[l("button",{style:X({color:`${_(x).accentColor}`}),type:"button",class:"drwclose",onClick:N},[s(r,{icon:"close"})],4),s(Be,{"date-filter":M.value,"time-filter":P.value},null,8,["date-filter","time-filter"])],2)])):ae("",!0),se.value?(T(),V("div",Ke,[l("div",{class:"drw-inner",style:X({background:`${_(x).themeDarkColor}`})},[l("button",{onClick:m,type:"button",style:X({color:`${_(x).accentColor}`}),class:"drwclose"},[s(r,{icon:"close"})],4),l("div",{ref_key:"eCharts",ref:D,style:{width:"100%",height:"100%",position:"relative"}},null,512)],4)])):ae("",!0),s(ge,{"mod-show":t.value,"onUpdate:modShow":e[0]||(e[0]=a=>t.value=a),"mod-title":"Select spot"},{default:w(()=>[(T(!0),V(ce,null,he(Object.keys(v.value),a=>(T(),be(Ue,{key:a,onOnItemSelect:b,"item-id":v.value[a].id,"item-name":v.value[a].name,"item-desc":v.value[a].desc,"item-safemark":v.value[a].safemark},null,8,["item-id","item-name","item-desc","item-safemark"]))),128))]),_:1},8,["mod-show"]),s(ge,{"mod-show":q.value,"onUpdate:modShow":e[6]||(e[6]=a=>q.value=a),"mod-title":"Global Chart Preference"},{default:w(()=>[l("p",{style:X({color:_(x).accentColor})},"These parameters applies to all displayed charts",4),s(W,{"in-label":"Y-Axis Max Tick Range","in-type":"number","model-value":S.value,"onUpdate:modelValue":e[1]||(e[1]=a=>S.value=a)},null,8,["model-value"]),s(W,{"in-label":"Y-Axis Min Tick Range","in-type":"number","model-value":R.value,"onUpdate:modelValue":e[2]||(e[2]=a=>R.value=a)},null,8,["model-value"]),s(W,{"in-label":"X-Axis Tick Amount","in-helper":"Greater value produces denser tick rates while lesser value loosen it but trims certain data in some points of time","in-type":"number","model-value":$.value,"onUpdate:modelValue":e[3]||(e[3]=a=>$.value=a)},null,8,["model-value"]),s(W,{"in-label":"Data Update Interval (Milisecond)","in-helper":"Higher value increases the delay while lower value decreases it. Warning: Lower value require more resources and may significantly affect client-side performance","in-type":"number","model-value":p.value,"onUpdate:modelValue":e[4]||(e[4]=a=>p.value=a)},null,8,["model-value"]),s(ve,{"in-label":"Curve Type","model-value":k.value,"onUpdate:modelValue":e[5]||(e[5]=a=>k.value=a)},{default:w(()=>e[9]||(e[9]=[l("option",{value:"smooth"},"Smooth",-1),l("option",{value:"straight"},"Straight",-1),l("option",{value:"monotoneCubic"},"Monotone Cubic",-1),l("option",{value:"stepline"},"Stepline",-1),l("option",{value:"linestep"},"Linestep",-1)])),_:1},8,["model-value"]),s(z,{onClick:J,"bt-type":"button","bt-disabled":!1},{default:w(()=>e[10]||(e[10]=[Y("Dismiss")])),_:1})]),_:1},8,["mod-show"]),s(_e,{"context-title":"Monitoring FOL"},{default:w(()=>[l("div",Qe,[l("div",Je,[s(z,{onClick:ee,"bt-size":"small","bt-disabled":!1},{default:w(()=>[s(r,{icon:"sliders"}),e[11]||(e[11]=Y(" Global Chart Preferences"))]),_:1})]),l("div",Ze,[s(W,{"in-type":"date","in-label":"Date Filter","model-value":M.value,"onUpdate:modelValue":e[7]||(e[7]=a=>M.value=a)},null,8,["model-value"]),s(ve,{"in-label":"Time Range Filter","model-value":P.value,"onUpdate:modelValue":e[8]||(e[8]=a=>P.value=a)},{default:w(()=>e[12]||(e[12]=[l("option",{value:"1"},"1 Hour",-1),l("option",{value:"3"},"3 Hours",-1),l("option",{value:"6"},"6 Hours",-1),l("option",{value:"12"},"12 Hours",-1),l("option",{value:"24"},"24 Hours",-1)])),_:1},8,["model-value"]),l("div",et,[l("div",tt,[s(z,{onClick:N,"bt-size":"small","bt-disabled":!1},{default:w(()=>[s(r,{icon:"chart-line"}),e[13]||(e[13]=Y(" Live Data Monitoring"))]),_:1})]),e[14]||(e[14]=l("hr",null,null,-1))]),l("div",at,[s(z,{onClick:y,"bt-type":"button","bt-disabled":!1,"bt-size":"small"},{default:w(()=>[s(r,{icon:"add"}),e[15]||(e[15]=Y(" Add Chart"))]),_:1})]),l("div",lt,[s(z,{onClick:I,"bt-disabled":!1,"bt-type":"button","bt-size":"small"},{default:w(()=>[s(r,{icon:"play"}),e[16]||(e[16]=Y(" Resume All"))]),_:1}),s(z,{onClick:L,"bt-disabled":!1,"bt-type":"button","bt-size":"small"},{default:w(()=>[s(r,{icon:"pause"}),e[17]||(e[17]=Y(" Pause All"))]),_:1})]),l("div",ot,[(T(!0),V(ce,null,he(Object.keys(v.value),a=>(T(),V("span",{title:"Click to navigate to this spot",key:a,class:le(["spot-data",`spotdata-${a}`]),onClick:d=>oe(a),onDblclick:d=>H(a)},[l("span",null,K(v.value[a].name+" - "+v.value[a].desc),1)],42,st))),128))]),Object.keys(v.value)?(T(),V("div",nt,[s(z,{onClick:A,"bt-disabled":!1,"bt-size":"small"},{default:w(()=>[s(r,{icon:c.value?"grip-vertical":"expand"},null,8,["icon"]),Y(" "+K(c.value?"Grid chart view":"Full chart view"),1)]),_:1})])):ae("",!0),l("div",{style:{},class:le(c.value?"chart-basket-gridview":"chart-basket-fullview")},[(T(!0),V(ce,null,he(v.value,(a,d)=>(T(),V("div",{key:d},[d<=F.value?(T(),be(We,{key:0,onOnChartReady:B,id:"chart"+Object.keys(a)[0],"chart-name":a.name,"filter-date":M.value,"filter-time":P.value,"safe-mark":a.safemark,"spot-id":a.id,"curve-type":k.value,"y-max":a.yMax,"y-min":R.value,"tick-amount":$.value,"y-interval":a.yInterval,"data-fetch-interval":p.value,gridview:c.value,"is-data-paused":h.value,onOnDrawingMode:re,onOnChartClose:g,onOnPause:C,onOnResume:Z},null,8,["id","chart-name","filter-date","filter-time","safe-mark","spot-id","curve-type","y-max","y-min","tick-amount","y-interval","data-fetch-interval","gridview","is-data-paused"])):ae("",!0)]))),128))],2)])])]),_:1})],64)}}});export{bt as default};
