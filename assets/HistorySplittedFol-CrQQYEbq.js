import{d as ct,h as c,i as pt,k as F,B as vt,r as Me,o as n,c as i,a as d,w as C,e as l,F as g,y as L,n as $,u as v,t as f,f as m,b as xe,l as w,p as x,x as Ae,K as Fe,m as yt}from"./index-Dk84wKEt.js";import{_ as ke}from"./InputView.vue_vue_type_style_index_0_lang-uHXNq25l.js";import{_ as ft}from"./MainWrapperView.vue_vue_type_style_index_0_lang-P4y1x57I.js";import{u as bt}from"./theme-BZV1M1HC.js";import{_ as ne}from"./SelectView.vue_vue_type_style_index_0_lang-C41ghWxf.js";import{_ as R}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-DPYv4y1n.js";import{_ as mt,m as gt,a as Re,u as ht,L as xt}from"./LoadingView-BMKlWSmH.js";import{h as kt}from"./moment-C5S46NFB.js";import{a as wt}from"./axios-BimPEqV4.js";import{_ as Oe}from"./CheckboxView.vue_vue_type_style_index_0_computed_true_lang-XKVtxU7V.js";import{a as _t}from"./spotModel-Csf7kO3-.js";import{i as Dt}from"./index-CehbAW_K.js";const Ct={class:"col-md-3"},Lt=["value"],$t={style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"1rem"}},St={style:{display:"flex","flex-flow":"row nowrap",gap:"1rem","align-items":"center"}},Tt={class:"col-md-12",style:{"padding-bottom":"6rem"}},Pt={class:"table-responsive"},Vt={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-end",gap:"1rem"}},Mt={style:{display:"flex","flex-flow":"row wrap","justify-content":"flex-end","align-items":"center",gap:"0.5rem","margin-bottom":"1rem",border:"1px solid #ccc",width:"fit-content",padding:"10px","border-radius":"100px"}},At={style:{display:"flex","flex-flow":"row nowrap","align-items":"center"}},Ft={style:{display:"flex","flex-flow":"row nowrap","align-items":"center"}},Rt={class:"tbl"},Ot={class:"theads"},Nt={style:{display:"flex","flex-flow":"column",width:"150px"}},Et={style:{"font-size":"14px","font-weight":"bold"}},It={key:1,style:{color:"#ccc"}},jt={style:{display:"flex","flex-flow":"row nowrap"}},Ut={style:{width:"100%",display:"flex","flex-flow":"column"}},zt=["src"],Kt={class:"col-md-12",style:{"margin-bottom":"1rem","margin-top":"2rem"}},Bt={class:"table-responsive"},Yt={style:{"margin-top":"1rem"}},Gt={class:"tbl2"},Wt=["onClick"],Ht={style:{"margin-top":"1rem"}},qt={class:"tbl2"},Zt={key:1,class:"leak-window"},Jt={class:"table-responsive"},Qt={style:{width:"100%","margin-top":"1rem"},class:"table table-striped table-hover;"},Xt={key:0,style:{border:"1px solid #ccc",padding:"10px"}},el={key:1,style:{border:"1px solid #ccc",padding:"10px"}},tl={style:{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}},ll={key:0,style:{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}},al={key:1,style:{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}},ol={key:0},sl=["href"],nl={style:{"margin-top":"1rem"}},il={key:1},rl={style:{"margin-top":"1rem"}},ul={key:2,class:"playback-controller"},dl={style:{display:"flex","flex-flow":"row nowrap",gap:"0.5rem"}},cl={style:{cursor:"pointer",padding:"10px",border:"1px solid #ccc","margin-bottom":"1rem","border-radius":"10px"}},pl={style:{cursor:"pointer",padding:"10px",border:"1px solid #ccc","margin-bottom":"1rem","border-radius":"10px"}},vl={style:{"border-radius":"10px",display:"flex","flex-flow":"row nowrap","justify-content":"space-between","padding-left":"10px","padding-right":"10px",border:"1px solid #ccc",padding:"20px","margin-bottom":"1rem"}},yl={style:{border:"1px solid #ccc",padding:"10px","padding-left":"40px","padding-right":"40px","border-radius":"100px"}},fl={style:{display:"flex","flex-flow":"row nowrap",width:"100%","align-items":"center"}},bl={style:{display:"flex","flex-flow":"no wrap",padding:"10px",gap:"0.5rem"}},ml={style:{width:"100%",padding:"10px",position:"relative"}},gl=["max","value"],hl={class:"slider-highlight"},xl={key:4,class:"pb-prompt"},kl={class:"pbp-inner"},Rl=ct({__name:"HistorySplittedFol",setup(wl){const ie=c(),re=c(),Ne=ht(),Z=c("randfor"),Ee=_t(),_=c("trunk1"),we=c(!0),O=c([]),S=c([]),k=c(0),J=c(0),I=c(0),Q=c(500),_e=c(""),D=c({trunk1:{name:"RANTAU TRUNKLINE",spots:[]}});pt(async()=>{Ie(),await Ee.getSpotsWithTresholds().then(async a=>{Object.keys(a).forEach(e=>{D.value.trunk1.spots.push(a[e])}),D.value.trunk1.trunkLength=63.3,setTimeout(async()=>{await z()},500)})});const p=bt(),X=c(60),T=c(),j=c([]),ue=c(!1);p.asideToggle(!1);const Ie=()=>{const a=new Date,e=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0"),t=`${e}-${s}-${o}`;T.value=t};F(()=>[T.value,X.value,_.value],async()=>{we.value||await z()});const De=async a=>new Promise(async(e,s)=>{try{const o=D.value[_.value];let t=[];for(let b=0;b<o.spots.length;b++)t.push(o.spots[b].id);const r={datefilter:a,timeFilter:X.value,idFilter:t},u=await wt.post(yt.baseEnd+"api/History/getsplittedhistdata",r);we.value=!1,e(u.data)}catch(o){s(o)}}),Ce=c({});function je(a){const e={};return a.forEach(s=>{s.data.forEach(o=>{const{idSpot:t,avgPsiValues:r}=o;e[t]?(r>e[t].maxValue&&(e[t].maxValue=r),r<e[t].minValue&&(e[t].minValue=r)):e[t]={maxValue:r,minValue:r}})}),Ce.value=e,Ce.value}const Ue=vt(()=>je(j.value));function ze(a,e){const s=Ue.value;if(!s[e])return"";const o=a.data.find(t=>t.idSpot===e);if(o){if(o.avgPsiValues===s[e].maxValue)return"highest-value";if(o.avgPsiValues===s[e].minValue)return"lowest-value"}return""}const y=c({});let de=null;const V=c(null),ce=c({});F(()=>y.value,()=>{if(de=Object.keys(y.value),U(),V.value!=null){ce.value=[];const a=V.value,e=y.value[a].data;de.filter(o=>o!==a).forEach(o=>{const t=y.value[o].data,r=[];D.value[_.value].spots.forEach((u,b)=>{const P=u.id,E=e.find(q=>q.idSpot===P),Ve=t.find(q=>q.idSpot===P);if(E&&Ve){const q=E.avgPsiValues.toFixed(2)-Ve.avgPsiValues.toFixed(2);r[b]=q}else r[b]=0}),ce.value.push({dropKey:o,deltas:r})})}});const Le=(a,e,s)=>{const o=e.timeRange,t=e.type,r=e.rangeData,u=e.dateFilter;a?(y.value[o+"."+t+"."+u]={timerange:o,type:t,checkbox:s,data:r,date:u},t==="normal"&&(V.value=o+"."+t+"."+u),y.value=$e(y.value),U()):(delete y.value[o+"."+t+"."+u],t==="normal"&&V.value===o+"."+t+"."+u&&(V.value=null),y.value=$e(y.value),We(!0))},$e=a=>{const e=Object.entries(a);return e.sort((o,t)=>o[1].type==="normal"&&t[1].type!=="normal"?-1:o[1].type!=="normal"&&t[1].type==="normal"?1:0),Object.fromEntries(e)},Ke=a=>a.type==="normal"?V.value!==null&&V.value!==a.timeRange+"."+a.type+"."+a.date:!1,U=()=>{Object.keys(y.value).length>1?ue.value=!0:ue.value=!1},Be=async()=>{j.value=[],pe(),U(),await z().then(()=>{}).catch(a=>{console.log(a)})},z=async()=>{pe(),j.value=[];try{let e=[...await De(T.value)];if(O.value.length>0)for(let s=0;s<O.value.length;s++){const o=O.value[s];if(o!==null){if(o.value!==T.value){const t=await De(o.value);e=e.concat(t)}}else console.log("Null")}j.value=e,S.value=e}catch(a){console.log(a)}},Ye=()=>{pe(),U()},pe=()=>{Object.keys(y.value).forEach(a=>{const e=y.value[a].checkbox;e.checked=!1}),V.value=null,y.value={},U()},ee=c(),Ge=async(a,e)=>{const s=a.map((u,b)=>{const P=u.length>1?u.map(E=>Number(E)||0):[0];return b==0?{name:"Normal",type:"line",data:P,smooth:!0}:{name:"Drop "+b,type:"line",data:P,smooth:!0}});let o=[];for(let u=0;u<D[_.value].spots.length;u++)o.push(D[_.value].spots[u].name);const t=await Promise.all(s);t.sort((u,b)=>u.name==="Normal"?-1:b.name==="Normal"?1:0);const r={toolbox:{show:!0,orient:"vertical",feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},tooltip:{trigger:"item",axisPointer:{type:"cross"}},grid:{left:"10%",right:"10%",bottom:"10%",containLabel:!0},legend:{show:!0},xAxis:{type:"category",data:o,axisLabel:{show:!0,rotate:45},boundaryGap:!1,axisTick:{alignWithLabel:!0}},yAxis:{name:"Pressure (PSI)",nameTextStyle:{verticalAlign:"middle"},axisTick:{show:!0,inside:!0},type:"value",axisLine:{show:!0}},series:t};if(!e)ee.value.setOption(r);else{let u={toolbox:{show:!0,orient:"vertical",feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},tooltip:{trigger:"item",axisPointer:{type:"cross"}},grid:{left:"10%",right:"10%",bottom:"10%",containLabel:!0},legend:{show:!0},xAxis:{type:"category",data:o,axisLabel:{show:!0,rotate:45},boundaryGap:!1,axisTick:{alignWithLabel:!0}},yAxis:{name:"Pressure (PSI)",nameTextStyle:{verticalAlign:"middle"},axisTick:{show:!0,inside:!0},type:"value",axisLine:{show:!0}},series:t};ee.value.clear(),ee.value.setOption(u)}},We=(a=!1)=>{if(ee.value){let e=[];Object.keys(y.value).forEach(s=>{const o=y.value[s].data;let t=[];for(let r=0;r<o.length;r++)t.push(parseFloat(o[r].avgPsiValues).toFixed(2));e.push(t)}),Ge(e,a)}},Se=(a,e)=>{const o=y.value[a].data;for(let t=0;t<o.length;t++)if(o[t].idSpot==e)return o[t].avgPsiValues.toFixed(2)},K=a=>a.spots,He=(a,e)=>{const s=y.value[e],o=s.timerange,t=s.type,r=s.date;t==="normal"&&V.value===o+"."+t+"."+r&&(V.value=null),a.checked=!1;const u={...y.value};delete u[e],y.value=u},B=c(0),qe=()=>{B.value++,O.value.push(null)},Ze=async()=>{B.value>0&&(B.value--,O.value.pop()),await z()},Je=async(a,e)=>{O.value[e]=a,await z()};c(0);const Y=c(!1),ve=c([]),M=c([]),N=c(!1),te=c(),Qe=c(),Xe=async()=>{ve.value=[];const a=Ne.predict(y.value,Z.value);if(Y.value=!0,Z.value==="randfor"?setTimeout(()=>{M.value=a},4e3):M.value=a,M.value!=null)for(let e=0;e<M.value.length;e++)M.value[e].suspectLocation.leak&&ve.value.push(M.value[e])},Te=c(),Pe=c(),et=(a,e,s)=>{te.value=a,N.value=!1,N.value=!0,Te.value=e,Pe.value=s};F(()=>Y.value,()=>{Y.value||(N.value=!1,M.value=null,te.value=null,Qe.value=null)}),F(()=>ie.value,()=>{tt(),W(k.value)});const tt=()=>{re.value=Dt(ie.value);const a={grid:{top:"10%",left:"10%",right:"10%",bottom:"15%"},legend:{show:!0,type:"scroll",orient:"horizontal"},xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{rotate:45,labelStyle:{fontSize:10}},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",name:"Pressure (PSI)",nameGap:10,max:600,axisTick:{show:!0,inside:!0}},series:[]};re.value.setOption(a)};let ye=[];const le={},fe=c([]),G=c({}),lt=c(),W=a=>{ye=[];for(let o of D.value[_.value].spots)le[o.name]=[];S.value.slice(0,a+1).forEach((o,t)=>{const r=`${o.dateFilter} (${o.timeRange})`;ye.push(r),lt.value=r,o.data.forEach(u=>{const b=D.value[_.value].spots.find(E=>E.id===u.idSpot).name,P=u.avgPsiValues??0;le[b][t]=Number(P.toFixed(2))})});const s=Object.keys(le).map(o=>({name:o,type:"line",data:le[o],symbol:"none",smooth:!1,tooltip:{trigger:"axis",formatter:function(t){return t[0].value}},endLabel:{show:!0,formatter:function(t){return t.value},color:"#000",backgroundColor:"inherit",padding:5,borderRadius:5}}));re.value.setOption({xAxis:{data:ye},series:s})},H=c(!1),h=c(!1),at=a=>{h.value=!1,fe.value=[],k.value=parseInt(a.target.value,10),W(k.value),I.value=k.value/S.value.length*100};let A=null;F(()=>[h.value,Q.value],()=>{h.value?(A!=null&&clearInterval(A),A=setInterval(()=>{k.value<S.value.length?(k.value++,S.value[k.value]!=null&&(W(k.value),I.value=k.value/S.value.length*100)):(h.value=!1,clearInterval(A))},Q.value)):A&&(clearInterval(A),A=null)});const ot=()=>{H.value=!1,h.value=!1,k.value=0,fe.value=[],clearInterval(A),W(k.value),I.value=k.value/S.value.length*100},ae=()=>{h.value=!1,k.value=0,fe.value=[],clearInterval(A),W(k.value),I.value=k.value/S.value.length*100},be=c(!1);F(()=>G.value,()=>{h.value=!1,be.value=!0},{deep:!0});const st=()=>{be.value=!1,h.value=!0},nt=()=>D.value[_.value].trunkLength,me=c(""),ge=c(""),he=c(!0),oe=c(!1);F(()=>T.value,()=>{const a=kt(T.value),e=a.add(1,"days").format("YYYY-MM-DD"),s=a.subtract(2,"days").format("YYYY-MM-DD");me.value=e,ge.value=s});const it=()=>{T.value=me.value,ae(),oe.value&&(h.value=!0)},rt=()=>{T.value=ge.value,ae(),oe.value&&(h.value=!0)};F(()=>h.value,()=>{!h.value&&k.value==S.value.length&&he.value&&(ae(),h.value=!0)});const ut=a=>{J.value=a},se=a=>{const e=Math.floor(a),s=Math.abs(a-e)*60,o=Math.floor(s),t=(s-o)*60;return`${e}° ${o}' ${t.toFixed(2)}"`},dt=async a=>{_e.value=a,await navigator.clipboard.writeText(_e.value),p.notifyShow("Coordinate copied to clipboard")};return(a,e)=>{const s=Me("font-awesome-icon"),o=Me("center");return n(),i(g,null,[d(ft,{"context-title":"FOL | Splitted History Data"},{default:C(()=>[l("div",Ct,[d(ne,{"in-label":"Select Line","model-value":_.value,"onUpdate:modelValue":e[0]||(e[0]=t=>_.value=t)},{default:C(()=>[(n(!0),i(g,null,L(Object.keys(D.value),(t,r)=>(n(),i("option",{key:r,value:t},f(D.value[t].name),9,Lt))),128))]),_:1},8,["model-value"]),d(ne,{"in-label":"Time Range","model-value":X.value,"onUpdate:modelValue":e[1]||(e[1]=t=>X.value=t)},{default:C(()=>e[12]||(e[12]=[l("option",{value:"1"},"1 Menit",-1),l("option",{value:"2"},"2 Menit",-1),l("option",{value:"3"},"3 Menit",-1),l("option",{value:"4"},"4 Menit",-1),l("option",{value:"5"},"5 Menit",-1),l("option",{value:"10"},"10 Menit",-1),l("option",{value:"15"},"15 Menit",-1),l("option",{value:"30"},"30 Menit",-1),l("option",{value:"60"},"60 Menit",-1)])),_:1},8,["model-value"]),l("div",$t,[d(ke,{"in-type":"date","in-label":"Date Filter","model-value":T.value,"onUpdate:modelValue":e[2]||(e[2]=t=>T.value=t),style:{width:"100%"}},null,8,["model-value"])]),l("div",St,[d(R,{onClick:Ze,"bt-size":"small","bt-type":"button","bt-disabled":!1},{default:C(()=>[d(s,{icon:"minus"})]),_:1}),l("span",{class:$([`${v(p).textTheme}`])},f(B.value),3),d(R,{onClick:qe,"bt-size":"small","bt-type":"button","bt-disabled":!1},{default:C(()=>[d(s,{icon:"plus"})]),_:1})]),(n(!0),i(g,null,L(B.value,(t,r)=>(n(),i("div",{key:r,style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"1rem"}},[d(ke,{"in-type":"date","in-label":`Date Filter ${t}`,onOnValueChange:u=>Je(u,r),style:{width:"100%"}},null,8,["in-label","onOnValueChange"])]))),128))]),l("div",Tt,[l("div",Pt,[l("div",Vt,[l("div",Mt,[l("div",At,[e[13]||(e[13]=l("div",{style:{"background-color":"green",width:"20px",height:"20px","border-radius":"100px"}},null,-1)),l("span",{class:$([`${v(p).textTheme}`]),style:{"margin-left":"0.2rem","font-size":"12px","font-weight":"bold"}},"Nilai Tertinggi",2)]),l("div",Ft,[e[14]||(e[14]=l("div",{style:{"background-color":"red",width:"20px",height:"20px","border-radius":"100px"}},null,-1)),l("span",{class:$([`${v(p).textTheme}`]),style:{"margin-left":"0.2rem","font-size":"12px","font-weight":"bold"}},"Nilai Terendah",2)])]),d(R,{onClick:Be,"bt-disabled":!1,"bt-type":"button","bt-size":"small",style:{height:"42px",width:"42px","border-radius":"100px",display:"flex","flex-flow":"row nowrap","align-items":"center"}},{default:C(()=>[d(s,{icon:"refresh"})]),_:1})]),l("table",Rt,[l("thead",Ot,[l("tr",{style:{padding:"20px"},class:$([`${v(p).textTheme}`])},[l("th",{style:m({border:`1px solid ${v(p).accentColor}`})},[d(s,{icon:"check-double"})],4),l("th",{style:m({border:`1px solid ${v(p).accentColor}`})},"Interval",4),(n(!0),i(g,null,L(K(D.value[_.value]),(t,r)=>(n(),i("th",{style:m({border:`1px solid ${v(p).accentColor}`}),key:r},f(t.name),5))),128))],2)]),l("tbody",null,[(n(!0),i(g,null,L(j.value,(t,r)=>(n(),i("tr",{key:r},[l("td",{style:m({border:`1px solid ${v(p).accentColor}`,width:"150px"}),class:$([`${v(p).textTheme}`])},[l("div",Nt,[d(Oe,{cb_disabled:Ke({timeRange:t.timeRange,type:"normal"}),cb_data:{timeRange:t.timeRange,type:"normal",rangeData:t.data,dateFilter:t.dateFilter},onOnCheckBoxChange:Le,cb_label:"Normal"},null,8,["cb_disabled","cb_data"]),d(Oe,{cb_disabled:!1,cb_checked:!1,cb_data:{timeRange:t.timeRange,type:"drop",rangeData:t.data,dateFilter:t.dateFilter},onOnCheckBoxChange:Le,cb_label:"Drop"},null,8,["cb_data"])])],6),l("td",{style:m({border:`1px solid ${v(p).accentColor}`}),class:$([`${v(p).textTheme}`])},[l("span",Et,f(t.dateFilter),1),e[15]||(e[15]=l("br",null,null,-1)),x(f(t.timeRange),1)],6),(n(!0),i(g,null,L(K(D.value[_.value]),(u,b)=>(n(),i("td",{style:m({border:`1px solid ${v(p).accentColor}`,position:"relative"}),key:b,class:$([`${ze(t,u.id)}`,`${v(p).textTheme}`])},[t.data.find(P=>P.idSpot===u.id)?(n(),i(g,{key:0},[x(f(t.data.find(P=>P.idSpot===u.id).avgPsiValues.toFixed(2)),1)],64)):(n(),i("span",It,"N/A"))],6))),128))]))),128))])])])])]),_:1}),ue.value?(n(),i("div",{key:0,class:$(["chart-container",[`${v(p).mTheme}`]])},[l("button",{onClick:Ye,class:"chc-dismiss",style:m({color:`${v(p).accentColor}`})},[d(s,{icon:"close"})],4),l("div",jt,[l("div",Ut,[d(o,null,{default:C(()=>[d(ke,{"in-label":"Drop Tolerance Value","in-type":"number","model-value":J.value,"onUpdate:modelValue":e[3]||(e[3]=t=>J.value=t),style:{width:"200px"}},null,8,["model-value"])]),_:1}),Object.keys(y.value).length?(n(),xe(mt,{key:0,onOnToleranceChanged:ut,"chart-data":y.value,"selected-spot":_.value,"trunk-length":nt(),"tolerance-value":J.value,"prediction-result":ve.value},null,8,["chart-data","selected-spot","trunk-length","tolerance-value","prediction-result"])):w("",!0)])]),l("img",{src:v(gt),alt:"map",style:{width:"100%",height:"600px","border-radius":"10px","object-fit":"contain"}},null,8,zt),l("div",Kt,[d(o,null,{default:C(()=>[d(ne,{"in-label":"Prediction Method","model-value":Z.value,"onUpdate:modelValue":e[4]||(e[4]=t=>Z.value=t)},{default:C(()=>e[16]||(e[16]=[l("option",{value:"randfor"},"MeLan",-1),l("option",{value:"dynamic"},"Dynamic",-1),l("option",{value:"static"},"Static",-1)])),_:1},8,["model-value"]),Object.keys(y.value).length>1?(n(),xe(R,{key:0,"bt-type":"button","bt-disabled":!1,onClick:Xe},{default:C(()=>[d(s,{icon:"water"}),e[17]||(e[17]=x(" Estimate Leak Location "))]),_:1})):w("",!0)]),_:1})]),l("div",Bt,[l("h5",Yt,[l("b",null,[d(s,{icon:"oil-well"}),e[18]||(e[18]=x(" Selected Pressures"))])]),l("table",Gt,[l("thead",null,[l("tr",{style:{padding:"5px"},class:$([`${v(p).textTheme}`])},[l("th",{style:m({border:`1px solid ${v(p).accentColor}`})},"ACTION",4),l("th",{style:m({border:`1px solid ${v(p).accentColor}`})},"PINNED SERIES",4),(n(!0),i(g,null,L(K(D.value[_.value]),(t,r)=>(n(),i("th",{style:m({border:`1px solid ${v(p).accentColor}`}),key:r},f(t.name),5))),128))],2)]),l("tbody",null,[(n(!0),i(g,null,L(v(de),(t,r)=>(n(),i("tr",{key:r},[l("td",{style:m({border:`1px solid ${v(p).accentColor}`,position:"relative",textTransform:"uppercase",fontWeight:"bold"})},[l("button",{onClick:u=>He(y.value[t].checkbox,t),class:"remove-series",type:"button"},[d(s,{icon:"close"})],8,Wt)],4),l("td",{class:$([`${v(p).textTheme}`]),style:m({border:`1px solid ${v(p).accentColor}`,position:"relative",textTransform:"uppercase",fontWeight:"bold"})},[x(f(y.value[t].date),1),e[19]||(e[19]=l("br",null,null,-1)),x(" "+f(y.value[t].timerange),1),e[20]||(e[20]=l("br",null,null,-1)),x(" "+f(y.value[t].type),1)],6),(n(!0),i(g,null,L(K(D.value[_.value]),(u,b)=>(n(),i("td",{style:m({border:`1px solid ${v(p).accentColor}`}),class:$([`${v(p).textTheme}`]),key:b},[Se(t,u.id)?(n(),i(g,{key:0},[x(f(Se(t,u.id)),1)],64)):(n(),i(g,{key:1},[x("0.00")],64))],6))),128))]))),128))])]),l("h5",Ht,[l("b",null,[d(s,{icon:"turn-down"}),e[21]||(e[21]=x(" Delta"))])]),l("table",qt,[l("thead",null,[l("tr",{style:{padding:"5px"},class:$([`${v(p).textTheme}`])},[l("th",{style:m({border:`1px solid ${v(p).accentColor}`})},"DROPS",4),l("th",{style:m({border:`1px solid ${v(p).accentColor}`})},"PINNED SERIES",4),(n(!0),i(g,null,L(K(D.value[_.value]),(t,r)=>(n(),i("th",{style:m({border:`1px solid ${v(p).accentColor}`}),key:r},f(t.name),5))),128))],2)]),l("tbody",null,[(n(!0),i(g,null,L(ce.value,(t,r)=>(n(),i("tr",{key:r},[l("td",{style:m({border:`1px solid ${v(p).accentColor}`})},f(r+1),5),l("td",{style:m({border:`1px solid ${v(p).accentColor}`})},f(t.dropKey.split(".")[0]+"."+t.dropKey.split(".")[1]+"."+t.dropKey.split(".")[2]),5),(n(!0),i(g,null,L(t.deltas,(u,b)=>(n(),i("td",{key:b,style:m({border:`1px solid ${v(p).accentColor}`})},f(u.toFixed(2)),5))),128))]))),128))])])])],2)):w("",!0),Y.value?(n(),i("div",Zt,[l("div",{class:$(["leak-body",[`${v(p).mTheme}`]])},[l("button",{type:"button",onClick:e[5]||(e[5]=t=>Y.value=!1),class:"leak-dismiss"},[d(s,{icon:"times"})]),l("div",{class:"l-left",style:m({width:N.value?"40%":"100%"})},[e[34]||(e[34]=l("h4",{style:{"font-weight":"bold"}},"Leak Analysis",-1)),e[35]||(e[35]=l("hr",null,null,-1)),M.value?(n(!0),i(g,{key:0},L(M.value,(t,r)=>(n(),i("div",{class:"analysis-set",key:r},[t!=!1?(n(),i(g,{key:0},[l("h6",null,[l("b",null,"Analysis on Dataset "+f(r+1),1)]),l("p",null,[e[32]||(e[32]=x(" Result: ")),t!=!1&&t.suspectLocation.leak?(n(),i(g,{key:0},[e[30]||(e[30]=l("b",{style:{color:"red"}},"Possible leak detected!",-1)),l("div",Jt,[l("table",Qt,[l("tr",null,[e[22]||(e[22]=l("th",{style:{border:"1px solid #ccc",padding:"10px"}},"Estimated Leak Point",-1)),t.suspectLocation.leakData.pu_location?(n(),i("th",Xt," PU ")):w("",!0),t.suspectLocation.leakData.coordinate?(n(),i("th",el," Coordinate ")):w("",!0)]),l("tbody",null,[l("tr",null,[l("td",tl,f(t.suspectLocation.leakData.leak_point)+" KM ",1),t.suspectLocation.leakData.pu_location?(n(),i("td",ll," KM "+f(t.suspectLocation.leakData.pu_location),1)):w("",!0),t.suspectLocation.leakData.coordinate?(n(),i("td",al,[e[24]||(e[24]=x(" LatLng: ")),l("code",null,f(t.suspectLocation.leakData.coordinate.latitude+", "+t.suspectLocation.leakData.coordinate.longitude),1),e[25]||(e[25]=l("br",null,null,-1)),e[26]||(e[26]=x(" DMS: ")),l("code",null,f(`${se(t.suspectLocation.leakData.coordinate.latitude)}, ${se(t.suspectLocation.leakData.coordinate.longitude)}`),1),e[27]||(e[27]=l("br",null,null,-1)),d(R,{onClick:u=>dt(`LATLNG: ${t.suspectLocation.leakData.coordinate.latitude}, ${t.suspectLocation.leakData.coordinate.longitude}
DMS: ${se(t.suspectLocation.leakData.coordinate.latitude)}, ${se(t.suspectLocation.leakData.coordinate.longitude)}`),style:{"margin-top":"5px"},"bt-disabled":!1,"bt-size":"small"},{default:C(()=>[d(s,{icon:"copy"}),e[23]||(e[23]=x(" Copy Coord "))]),_:2},1032,["onClick"])])):w("",!0)])])])]),t.suspectLocation.leakData.coordinate?w("",!0):(n(),i("p",ol,[d(s,{icon:"info-circle"}),e[28]||(e[28]=x(" Map view and PU Location data is currently not supported for this line "))])),d(R,{onClick:u=>et(t.suspectLocation.leakData.coordinate,t.suspectLocation.leakData.leak_point,t.suspectLocation.leakData.pu_location),"bt-disabled":!t.suspectLocation.leakData.coordinate},{default:C(()=>[d(s,{icon:"map-marker"}),e[29]||(e[29]=x(" Pinpoint on Map"))]),_:2},1032,["onClick","bt-disabled"]),t.suspectLocation.leakData.coordinate?(n(),i("a",{key:1,class:"gmaps",target:"_blank",href:`https://www.google.com/maps?q=${t.suspectLocation.leakData.coordinate.latitude},${t.suspectLocation.leakData.coordinate.longitude}`,style:{"margin-left":"0.5rem"}},"Google Maps",8,sl)):w("",!0)],64)):(n(),i(g,{key:1},[e[31]||(e[31]=l("b",{style:{color:"#555"}},"No leak detected",-1)),l("ol",nl,[(n(!0),i(g,null,L(t.suspectLocation.probabilities,(u,b)=>(n(),i("li",{key:b},f(u),1))),128))])],64))])],64)):(n(),i("h6",il,[l("b",null,"Analysis on Dataset "+f(r+1),1),e[33]||(e[33]=l("b",{style:{color:"#555"}},"Tidak ada indikasi",-1)),l("ol",rl,[(n(!0),i(g,null,L(t.suspectLocation.probabilities,(u,b)=>(n(),i("li",{key:b},f(u),1))),128))])]))]))),128)):(n(),xe(xt,{key:1,message:"Calculating leak probabilities..."}))],4),N.value?(n(),i("div",{key:0,class:"l-right",style:m({width:N.value?"60%":"100%",position:"relative"})},[e[36]||(e[36]=l("h4",{style:{"font-weight":"bold"}},"Map View",-1)),e[37]||(e[37]=l("hr",null,null,-1)),d(Re,{latitude:te.value.latitude,longitude:te.value.longitude,"leak-point":Te.value,"pu-location":Pe.value},null,8,["latitude","longitude","leak-point","pu-location"])],4)):w("",!0)],2)])):w("",!0),H.value?(n(),i("div",ul,[l("button",{type:"button",onClick:ot,class:"leak-dismiss"},[d(s,{icon:"close"})]),e[41]||(e[41]=l("h5",{style:{"text-align":"center"}},[l("b",null,"History Data Playback")],-1)),d(o,null,{default:C(()=>[d(ne,{style:{width:"400px"},"in-label":"Speed","model-value":Q.value,"onUpdate:modelValue":e[6]||(e[6]=t=>Q.value=t)},{default:C(()=>e[38]||(e[38]=[l("option",{value:"1000"},"Slowest",-1),l("option",{value:"500"},"Slower",-1),l("option",{value:"300"},"Moderate",-1),l("option",{value:"250"},"Faster",-1),l("option",{value:"200"},"Fastest",-1)])),_:1},8,["model-value"])]),_:1}),l("div",dl,[l("label",cl,[Ae(l("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>he.value=t),type:"checkbox"},null,512),[[Fe,he.value]]),e[39]||(e[39]=x(" Auto-replay "))]),l("label",pl,[Ae(l("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>oe.value=t),type:"checkbox"},null,512),[[Fe,oe.value]]),e[40]||(e[40]=x(" Autoplay on navigating "))])]),l("div",vl,[d(R,{"bt-disabled":!1,onClick:rt},{default:C(()=>[d(s,{icon:"backward"}),x("    "+f(ge.value),1)]),_:1}),l("span",yl,[l("b",null,f(T.value),1)]),d(R,{"bt-disabled":!1,onClick:it},{default:C(()=>[x(f(me.value)+"    ",1),d(s,{icon:"forward"})]),_:1})]),l("div",{ref_key:"heatMap",ref:ie,style:{width:"100%",height:"600px"}},null,512),l("div",fl,[l("div",bl,[h.value?w("",!0):(n(),i("button",{key:0,onClick:e[9]||(e[9]=t=>h.value=!h.value),class:"controlbtn",type:"button"},[d(s,{icon:"play"})])),h.value?(n(),i("button",{key:1,onClick:e[10]||(e[10]=t=>h.value=!h.value),class:"controlbtn",type:"button"},[d(s,{icon:"pause"})])):w("",!0)]),l("div",ml,[l("input",{onChange:at,type:"range",min:0,max:S.value.length,value:k.value,class:"slider"},null,40,gl),l("span",hl,[l("span",{class:"slider-track",style:m({width:`${I.value}%`})},null,4)])]),l("div",null,[!h.value&&k.value==S.value.length?(n(),i("button",{key:0,onClick:ae,class:"controlbtn",type:"button"},[d(s,{icon:"undo"})])):w("",!0)])])])):w("",!0),H.value?w("",!0):(n(),i("button",{key:3,type:"button",class:"showplayback",onClick:e[11]||(e[11]=t=>H.value=!H.value)},[d(s,{icon:"play"})])),be.value?(n(),i("div",xl,[l("div",kl,[l("button",{type:"button",onClick:st,class:"pbp-dismiss"},[d(s,{icon:"close"})]),e[42]||(e[42]=l("h3",null,[l("b",null,"Possible Leak Detected")],-1)),d(Re,{"leak-point":G.value.suspectLocation.leakData.leak_point,latitude:G.value.mapsLink.latitude,longitude:G.value.mapsLink.longitude,"pu-location":G.value.suspectLocation.leakData.pu_location},null,8,["leak-point","latitude","longitude","pu-location"])])])):w("",!0)],64)}}});export{Rl as default};
