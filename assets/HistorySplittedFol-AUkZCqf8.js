import{d as ct,P as d,Q as pt,S as F,Y as vt,c as i,a as c,I as D,w as C,n as $,u as v,e as l,r as Me,f as b,b as he,T as x,F as g,M as L,N as Ae,W as Fe,t as f,o as n}from"./index-CDQFnZzk.js";import{_ as xe}from"./InputView.vue_vue_type_style_index_0_lang-B5KEVRQq.js";import{_ as yt}from"./MainWrapperView.vue_vue_type_style_index_0_lang-DaUcP8qX.js";import{u as ft}from"./theme-DoffrhoZ.js";import{_ as se}from"./SelectView.vue_vue_type_style_index_0_lang-BXPeyPUA.js";import{_ as R}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-USzZ9sjb.js";import{_ as mt,m as bt,a as Re,L as gt}from"./LoadingView-D71eQV3j.js";import{h as ht}from"./moment-zH0z38ay.js";import{u as xt}from"./http-Cz47y6o_.js";import{_ as Oe}from"./CheckboxView.vue_vue_type_style_index_0_computed_true_lang-Bxa57XrC.js";import{u as kt}from"./spotModel-ClvWpi9m.js";import{u as wt}from"./predict-S9mJmMfE.js";import{i as _t}from"./index-B5d4h4Xc.js";import"./trunk-nsbvB76T.js";const Dt={class:"col-md-3"},Ct=["value"],Lt={style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"1rem"}},$t={style:{display:"flex","flex-flow":"row nowrap",gap:"1rem","align-items":"center"}},St={class:"col-md-12",style:{"padding-bottom":"6rem"}},Tt={class:"table-responsive"},Pt={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-end",gap:"1rem"}},Vt={style:{display:"flex","flex-flow":"row wrap","justify-content":"flex-end","align-items":"center",gap:"0.5rem","margin-bottom":"1rem",border:"1px solid #ccc",width:"fit-content",padding:"10px","border-radius":"100px"}},Mt={style:{display:"flex","flex-flow":"row nowrap","align-items":"center"}},At={style:{display:"flex","flex-flow":"row nowrap","align-items":"center"}},Ft={class:"tbl"},Rt={class:"theads"},Ot={style:{display:"flex","flex-flow":"column",width:"150px"}},Nt={style:{"font-size":"14px","font-weight":"bold"}},It={key:1,style:{color:"#ccc"}},Et={style:{display:"flex","flex-flow":"row nowrap"}},jt={style:{width:"100%",display:"flex","flex-flow":"column"}},Ut=["src"],zt={class:"col-md-12",style:{"margin-bottom":"1rem","margin-top":"2rem"}},Kt={class:"table-responsive"},Yt={style:{"margin-top":"1rem"}},Bt={class:"tbl2"},Gt=["onClick"],Wt={style:{"margin-top":"1rem"}},Ht={class:"tbl2"},qt={key:1,class:"leak-window"},Zt={class:"table-responsive"},Qt={style:{width:"100%","margin-top":"1rem"},class:"table table-striped table-hover;"},Jt={key:0,style:{border:"1px solid #ccc",padding:"10px"}},Xt={key:1,style:{border:"1px solid #ccc",padding:"10px"}},el={style:{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}},tl={key:0,style:{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}},ll={key:1,style:{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}},al={key:0},ol=["href"],sl={style:{"margin-top":"1rem"}},nl={key:1},il={style:{"margin-top":"1rem"}},rl={key:2,class:"playback-controller"},ul={style:{display:"flex","flex-flow":"row nowrap",gap:"0.5rem"}},dl={style:{cursor:"pointer",padding:"10px",border:"1px solid #ccc","margin-bottom":"1rem","border-radius":"10px"}},cl={style:{cursor:"pointer",padding:"10px",border:"1px solid #ccc","margin-bottom":"1rem","border-radius":"10px"}},pl={style:{"border-radius":"10px",display:"flex","flex-flow":"row nowrap","justify-content":"space-between","padding-left":"10px","padding-right":"10px",border:"1px solid #ccc",padding:"20px","margin-bottom":"1rem"}},vl={style:{border:"1px solid #ccc",padding:"10px","padding-left":"40px","padding-right":"40px","border-radius":"100px"}},yl={style:{display:"flex","flex-flow":"row nowrap",width:"100%","align-items":"center"}},fl={style:{display:"flex","flex-flow":"no wrap",padding:"10px",gap:"0.5rem"}},ml={style:{width:"100%",padding:"10px",position:"relative"}},bl=["max","value"],gl={class:"slider-highlight"},hl={key:3,class:"pb-prompt"},xl={class:"pbp-inner"},Ol=ct({__name:"HistorySplittedFol",setup(kl){const ne=d(),ie=d(),Ne=wt(),q=d("randfor"),Ie=kt(),w=d("trunk1"),ke=d(!0),O=d([]),S=d([]),k=d(0),Z=d(0),E=d(0),Q=d(500),we=d(""),_=d({trunk1:{name:"RANTAU TRUNKLINE",spots:[]}});pt(async()=>{Ee(),await Ie.getSpotsWithTresholds().then(async a=>{Object.keys(a).forEach(e=>{_.value.trunk1.spots.push(a[e])}),_.value.trunk1.trunkLength=109.3,setTimeout(async()=>{await z()},500)})});const p=ft(),J=d(60),T=d(),j=d([]),re=d(!1);p.asideToggle(!1);const Ee=()=>{const a=new Date,e=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0"),t=`${e}-${s}-${o}`;T.value=t};F(()=>[T.value,J.value,w.value],async()=>{ke.value||await z()});const _e=async a=>new Promise(async(e,s)=>{try{const o=_.value[w.value];let t=[];for(let m=0;m<o.spots.length;m++)t.push(o.spots[m].id);const r={datefilter:a,timeFilter:J.value,idFilter:t},u=await xt().httpPost("api/History/getsplittedhistdata",r);ke.value=!1,e(u)}catch(o){s(o)}}),De=d({});function je(a){const e={};return a.forEach(s=>{s.data.forEach(o=>{const{idSpot:t,avgPsiValues:r}=o;e[t]?(r>e[t].maxValue&&(e[t].maxValue=r),r<e[t].minValue&&(e[t].minValue=r)):e[t]={maxValue:r,minValue:r}})}),De.value=e,De.value}const Ue=vt(()=>je(j.value));function ze(a,e){const s=Ue.value;if(!s[e])return"";const o=a.data.find(t=>t.idSpot===e);if(o){if(o.avgPsiValues===s[e].maxValue)return"highest-value";if(o.avgPsiValues===s[e].minValue)return"lowest-value"}return""}const y=d({});let ue=null;const V=d(null),de=d({});F(()=>y.value,()=>{if(ue=Object.keys(y.value),U(),V.value!=null){de.value=[];const a=V.value,e=y.value[a].data;ue.filter(o=>o!==a).forEach(o=>{const t=y.value[o].data,r=[];_.value[w.value].spots.forEach((u,m)=>{const P=u.id,I=e.find(H=>H.idSpot===P),Ve=t.find(H=>H.idSpot===P);if(I&&Ve){const H=I.avgPsiValues.toFixed(2)-Ve.avgPsiValues.toFixed(2);r[m]=H}else r[m]=0}),de.value.push({dropKey:o,deltas:r})})}});const Ce=(a,e,s)=>{const o=e.timeRange,t=e.type,r=e.rangeData,u=e.dateFilter;a?(y.value[o+"."+t+"."+u]={timerange:o,type:t,checkbox:s,data:r,date:u},t==="normal"&&(V.value=o+"."+t+"."+u),y.value=Le(y.value),U()):(delete y.value[o+"."+t+"."+u],t==="normal"&&V.value===o+"."+t+"."+u&&(V.value=null),y.value=Le(y.value),We(!0))},Le=a=>{const e=Object.entries(a);return e.sort((o,t)=>o[1].type==="normal"&&t[1].type!=="normal"?-1:o[1].type!=="normal"&&t[1].type==="normal"?1:0),Object.fromEntries(e)},Ke=a=>V.value!==null&&V.value!==a.timeRange+"."+a.type+"."+a.date,U=()=>{Object.keys(y.value).length>1?re.value=!0:re.value=!1},Ye=async()=>{j.value=[],ce(),U(),await z().then(()=>{}).catch(a=>{console.log(a)})},z=async()=>{ce(),j.value=[];try{let e=[...await _e(T.value)];if(O.value.length>0)for(let s=0;s<O.value.length;s++){const o=O.value[s];if(o!==null){if(o.value!==T.value){const t=await _e(o.value);e=e.concat(t)}}else console.log("Null")}j.value=e,S.value=e}catch(a){console.log(a)}},Be=()=>{ce(),U()},ce=()=>{Object.keys(y.value).forEach(a=>{const e=y.value[a].checkbox;e.checked=!1}),V.value=null,y.value={},U()},X=d(),Ge=async(a,e)=>{const s=a.map((u,m)=>{const P=u.length>1?u.map(I=>Number(I)||0):[0];return m==0?{name:"Normal",type:"line",data:P,smooth:!0}:{name:"Drop "+m,type:"line",data:P,smooth:!0}});let o=[];for(let u=0;u<_[w.value].spots.length;u++)o.push(_[w.value].spots[u].name);const t=await Promise.all(s);t.sort((u,m)=>u.name==="Normal"?-1:m.name==="Normal"?1:0);const r={toolbox:{show:!0,orient:"vertical",feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},tooltip:{trigger:"item",axisPointer:{type:"cross"}},grid:{left:"10%",right:"10%",bottom:"10%",containLabel:!0},legend:{show:!0},xAxis:{type:"category",data:o,axisLabel:{show:!0,rotate:45},boundaryGap:!1,axisTick:{alignWithLabel:!0}},yAxis:{name:"Pressure (PSI)",nameTextStyle:{verticalAlign:"middle"},axisTick:{show:!0,inside:!0},type:"value",axisLine:{show:!0}},series:t};if(!e)X.value.setOption(r);else{let u={toolbox:{show:!0,orient:"vertical",feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},tooltip:{trigger:"item",axisPointer:{type:"cross"}},grid:{left:"10%",right:"10%",bottom:"10%",containLabel:!0},legend:{show:!0},xAxis:{type:"category",data:o,axisLabel:{show:!0,rotate:45},boundaryGap:!1,axisTick:{alignWithLabel:!0}},yAxis:{name:"Pressure (PSI)",nameTextStyle:{verticalAlign:"middle"},axisTick:{show:!0,inside:!0},type:"value",axisLine:{show:!0}},series:t};X.value.clear(),X.value.setOption(u)}},We=(a=!1)=>{if(X.value){let e=[];Object.keys(y.value).forEach(s=>{const o=y.value[s].data;let t=[];for(let r=0;r<o.length;r++)t.push(parseFloat(o[r].avgPsiValues).toFixed(2));e.push(t)}),Ge(e,a)}},$e=(a,e)=>{const o=y.value[a].data;for(let t=0;t<o.length;t++)if(o[t].idSpot==e)return o[t].avgPsiValues.toFixed(2)},K=a=>a.spots,He=(a,e)=>{const s=y.value[e],o=s.timerange,t=s.type,r=s.date;t==="normal"&&V.value===o+"."+t+"."+r&&(V.value=null),a.checked=!1;const u={...y.value};delete u[e],y.value=u},Y=d(0),qe=()=>{Y.value++,O.value.push(null)},Ze=async()=>{Y.value>0&&(Y.value--,O.value.pop()),await z()},Qe=async(a,e)=>{O.value[e]=a,await z()};d(0);const B=d(!1),pe=d([]),M=d([]),N=d(!1),ee=d(),Je=d(),Xe=async()=>{pe.value=[];const a=Ne.predict(y.value,q.value);if(B.value=!0,q.value==="randfor"?setTimeout(()=>{M.value=a},4e3):M.value=a,M.value!=null)for(let e=0;e<M.value.length;e++)M.value[e].suspectLocation.leak&&pe.value.push(M.value[e])},Se=d(),Te=d(),et=(a,e,s)=>{ee.value=a,N.value=!1,N.value=!0,Se.value=e,Te.value=s};F(()=>B.value,()=>{B.value||(N.value=!1,M.value=null,ee.value=null,Je.value=null)}),F(()=>ne.value,()=>{tt(),W(k.value)});const tt=()=>{ie.value=_t(ne.value);const a={grid:{top:"10%",left:"10%",right:"10%",bottom:"15%"},legend:{show:!0,type:"scroll",orient:"horizontal"},xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{rotate:45,labelStyle:{fontSize:10}},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",name:"Pressure (PSI)",nameGap:10,max:600,axisTick:{show:!0,inside:!0}},series:[]};ie.value.setOption(a)};let ve=[];const te={},ye=d([]),G=d({}),lt=d(),W=a=>{ve=[];for(let o of _.value[w.value].spots)te[o.name]=[];S.value.slice(0,a+1).forEach((o,t)=>{const r=`${o.dateFilter} (${o.timeRange})`;ve.push(r),lt.value=r,o.data.forEach(u=>{const m=_.value[w.value].spots.find(I=>I.id===u.idSpot).name,P=u.avgPsiValues??0;te[m][t]=Number(P.toFixed(2))})});const s=Object.keys(te).map(o=>({name:o,type:"line",data:te[o],symbol:"none",smooth:!1,tooltip:{trigger:"axis",formatter:function(t){return t[0].value}},endLabel:{show:!0,formatter:function(t){return t.value},color:"#000",backgroundColor:"inherit",padding:5,borderRadius:5}}));ie.value.setOption({xAxis:{data:ve},series:s})},Pe=d(!1),h=d(!1),at=a=>{h.value=!1,ye.value=[],k.value=parseInt(a.target.value,10),W(k.value),E.value=k.value/S.value.length*100};let A=null;F(()=>[h.value,Q.value],()=>{h.value?(A!=null&&clearInterval(A),A=setInterval(()=>{k.value<S.value.length?(k.value++,S.value[k.value]!=null&&(W(k.value),E.value=k.value/S.value.length*100)):(h.value=!1,clearInterval(A))},Q.value)):A&&(clearInterval(A),A=null)});const ot=()=>{Pe.value=!1,h.value=!1,k.value=0,ye.value=[],clearInterval(A),W(k.value),E.value=k.value/S.value.length*100},le=()=>{h.value=!1,k.value=0,ye.value=[],clearInterval(A),W(k.value),E.value=k.value/S.value.length*100},fe=d(!1);F(()=>G.value,()=>{h.value=!1,fe.value=!0},{deep:!0});const st=()=>{fe.value=!1,h.value=!0},nt=()=>_.value[w.value].trunkLength,me=d(""),be=d(""),ge=d(!0),ae=d(!1);F(()=>T.value,()=>{const a=ht(T.value),e=a.add(1,"days").format("YYYY-MM-DD"),s=a.subtract(2,"days").format("YYYY-MM-DD");me.value=e,be.value=s});const it=()=>{T.value=me.value,le(),ae.value&&(h.value=!0)},rt=()=>{T.value=be.value,le(),ae.value&&(h.value=!0)};F(()=>h.value,()=>{!h.value&&k.value==S.value.length&&ge.value&&(le(),h.value=!0)});const ut=a=>{Z.value=a},oe=a=>{const e=Math.floor(a),s=Math.abs(a-e)*60,o=Math.floor(s),t=(s-o)*60;return`${e}° ${o}' ${t.toFixed(2)}"`},dt=async a=>{we.value=a,await navigator.clipboard.writeText(we.value),p.notifyShow("Coordinate copied to clipboard")};return(a,e)=>{const s=Me("font-awesome-icon"),o=Me("center");return n(),i(g,null,[c(yt,{"context-title":"FOL | Splitted History Data"},{default:C(()=>[l("div",Dt,[c(se,{"in-label":"Select Line","model-value":w.value,"onUpdate:modelValue":e[0]||(e[0]=t=>w.value=t)},{default:C(()=>[(n(!0),i(g,null,L(Object.keys(_.value),(t,r)=>(n(),i("option",{key:r,value:t},f(_.value[t].name),9,Ct))),128))]),_:1},8,["model-value"]),c(se,{"in-label":"Time Range","model-value":J.value,"onUpdate:modelValue":e[1]||(e[1]=t=>J.value=t)},{default:C(()=>e[11]||(e[11]=[l("option",{value:"1"},"1 Menit",-1),l("option",{value:"2"},"2 Menit",-1),l("option",{value:"3"},"3 Menit",-1),l("option",{value:"4"},"4 Menit",-1),l("option",{value:"5"},"5 Menit",-1),l("option",{value:"10"},"10 Menit",-1),l("option",{value:"15"},"15 Menit",-1),l("option",{value:"30"},"30 Menit",-1),l("option",{value:"60"},"60 Menit",-1)])),_:1},8,["model-value"]),l("div",Lt,[c(xe,{"in-type":"date","in-label":"Date Filter","model-value":T.value,"onUpdate:modelValue":e[2]||(e[2]=t=>T.value=t),style:{width:"100%"}},null,8,["model-value"])]),l("div",$t,[c(R,{onClick:Ze,"bt-size":"small","bt-type":"button","bt-disabled":!1},{default:C(()=>[c(s,{icon:"minus"})]),_:1}),l("span",{class:$([`${v(p).textTheme}`])},f(Y.value),3),c(R,{onClick:qe,"bt-size":"small","bt-type":"button","bt-disabled":!1},{default:C(()=>[c(s,{icon:"plus"})]),_:1})]),(n(!0),i(g,null,L(Y.value,(t,r)=>(n(),i("div",{key:r,style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"1rem"}},[c(xe,{"in-type":"date","in-label":`Date Filter ${t}`,onOnValueChange:u=>Qe(u,r),style:{width:"100%"}},null,8,["in-label","onOnValueChange"])]))),128))]),l("div",St,[l("div",Tt,[l("div",Pt,[l("div",Vt,[l("div",Mt,[e[12]||(e[12]=l("div",{style:{"background-color":"green",width:"20px",height:"20px","border-radius":"100px"}},null,-1)),l("span",{class:$([`${v(p).textTheme}`]),style:{"margin-left":"0.2rem","font-size":"12px","font-weight":"bold"}},"Nilai Tertinggi",2)]),l("div",At,[e[13]||(e[13]=l("div",{style:{"background-color":"red",width:"20px",height:"20px","border-radius":"100px"}},null,-1)),l("span",{class:$([`${v(p).textTheme}`]),style:{"margin-left":"0.2rem","font-size":"12px","font-weight":"bold"}},"Nilai Terendah",2)])]),c(R,{onClick:Ye,"bt-disabled":!1,"bt-type":"button","bt-size":"small",style:{height:"42px",width:"42px","border-radius":"100px",display:"flex","flex-flow":"row nowrap","align-items":"center"}},{default:C(()=>[c(s,{icon:"refresh"})]),_:1})]),l("table",Ft,[l("thead",Rt,[l("tr",{style:{padding:"20px"},class:$([`${v(p).textTheme}`])},[l("th",{style:b({border:`1px solid ${v(p).accentColor}`})},[c(s,{icon:"check-double"})],4),l("th",{style:b({border:`1px solid ${v(p).accentColor}`})},"Interval",4),(n(!0),i(g,null,L(K(_.value[w.value]),(t,r)=>(n(),i("th",{style:b({border:`1px solid ${v(p).accentColor}`}),key:r},f(t.name),5))),128))],2)]),l("tbody",null,[(n(!0),i(g,null,L(j.value,(t,r)=>(n(),i("tr",{key:r},[l("td",{style:b({border:`1px solid ${v(p).accentColor}`,width:"150px"}),class:$([`${v(p).textTheme}`])},[l("div",Ot,[c(Oe,{cb_disabled:Ke({timeRange:t.timeRange,type:"normal"}),cb_data:{timeRange:t.timeRange,type:"normal",rangeData:t.data,dateFilter:t.dateFilter},onOnCheckBoxChange:Ce,cb_label:"Normal"},null,8,["cb_disabled","cb_data"]),c(Oe,{cb_disabled:!1,cb_checked:!1,cb_data:{timeRange:t.timeRange,type:"drop",rangeData:t.data,dateFilter:t.dateFilter},onOnCheckBoxChange:Ce,cb_label:"Drop"},null,8,["cb_data"])])],6),l("td",{style:b({border:`1px solid ${v(p).accentColor}`}),class:$([`${v(p).textTheme}`])},[l("span",Nt,f(t.dateFilter),1),e[14]||(e[14]=l("br",null,null,-1)),x(f(t.timeRange),1)],6),(n(!0),i(g,null,L(K(_.value[w.value]),(u,m)=>(n(),i("td",{style:b({border:`1px solid ${v(p).accentColor}`,position:"relative"}),key:m,class:$([`${ze(t,u.id)}`,`${v(p).textTheme}`])},[t.data.find(P=>P.idSpot===u.id)?(n(),i(g,{key:0},[x(f(t.data.find(P=>P.idSpot===u.id).avgPsiValues.toFixed(2)),1)],64)):(n(),i("span",It,"N/A"))],6))),128))]))),128))])])])])]),_:1}),re.value?(n(),i("div",{key:0,class:$(["chart-container",[`${v(p).mTheme}`]])},[l("button",{onClick:Be,class:"chc-dismiss",style:b({color:`${v(p).accentColor}`})},[c(s,{icon:"close"})],4),l("div",Et,[l("div",jt,[c(o,null,{default:C(()=>[c(xe,{"in-label":"Drop Tolerance Value","in-type":"number","model-value":Z.value,"onUpdate:modelValue":e[3]||(e[3]=t=>Z.value=t),style:{width:"200px"}},null,8,["model-value"])]),_:1}),Object.keys(y.value).length?(n(),he(mt,{key:0,onOnToleranceChanged:ut,"chart-data":y.value,"selected-spot":w.value,"trunk-length":nt(),"tolerance-value":Z.value,"prediction-result":pe.value},null,8,["chart-data","selected-spot","trunk-length","tolerance-value","prediction-result"])):D("",!0)])]),l("img",{src:v(bt),alt:"map",style:{width:"100%",height:"600px","border-radius":"10px","object-fit":"contain"}},null,8,Ut),l("div",zt,[c(o,null,{default:C(()=>[c(se,{"in-label":"Prediction Method","model-value":q.value,"onUpdate:modelValue":e[4]||(e[4]=t=>q.value=t)},{default:C(()=>e[15]||(e[15]=[l("option",{value:"randfor"},"MeLan",-1),l("option",{value:"dynamic"},"Dynamic",-1),l("option",{value:"static"},"Static",-1)])),_:1},8,["model-value"]),Object.keys(y.value).length>1?(n(),he(R,{key:0,"bt-type":"button","bt-disabled":!1,onClick:Xe},{default:C(()=>[c(s,{icon:"water"}),e[16]||(e[16]=x(" Estimate Leak Location "))]),_:1})):D("",!0)]),_:1})]),l("div",Kt,[l("h5",Yt,[l("b",null,[c(s,{icon:"oil-well"}),e[17]||(e[17]=x(" Selected Pressures"))])]),l("table",Bt,[l("thead",null,[l("tr",{style:{padding:"5px"},class:$([`${v(p).textTheme}`])},[l("th",{style:b({border:`1px solid ${v(p).accentColor}`})},"ACTION",4),l("th",{style:b({border:`1px solid ${v(p).accentColor}`})},"PINNED SERIES",4),(n(!0),i(g,null,L(K(_.value[w.value]),(t,r)=>(n(),i("th",{style:b({border:`1px solid ${v(p).accentColor}`}),key:r},f(t.name),5))),128))],2)]),l("tbody",null,[(n(!0),i(g,null,L(v(ue),(t,r)=>(n(),i("tr",{key:r},[l("td",{style:b({border:`1px solid ${v(p).accentColor}`,position:"relative",textTransform:"uppercase",fontWeight:"bold"})},[l("button",{onClick:u=>He(y.value[t].checkbox,t),class:"remove-series",type:"button"},[c(s,{icon:"close"})],8,Gt)],4),l("td",{class:$([`${v(p).textTheme}`]),style:b({border:`1px solid ${v(p).accentColor}`,position:"relative",textTransform:"uppercase",fontWeight:"bold"})},[x(f(y.value[t].date),1),e[18]||(e[18]=l("br",null,null,-1)),x(" "+f(y.value[t].timerange),1),e[19]||(e[19]=l("br",null,null,-1)),x(" "+f(y.value[t].type),1)],6),(n(!0),i(g,null,L(K(_.value[w.value]),(u,m)=>(n(),i("td",{style:b({border:`1px solid ${v(p).accentColor}`}),class:$([`${v(p).textTheme}`]),key:m},[$e(t,u.id)?(n(),i(g,{key:0},[x(f($e(t,u.id)),1)],64)):(n(),i(g,{key:1},[x("0.00")],64))],6))),128))]))),128))])]),l("h5",Wt,[l("b",null,[c(s,{icon:"turn-down"}),e[20]||(e[20]=x(" Delta"))])]),l("table",Ht,[l("thead",null,[l("tr",{style:{padding:"5px"},class:$([`${v(p).textTheme}`])},[l("th",{style:b({border:`1px solid ${v(p).accentColor}`})},"DROPS",4),l("th",{style:b({border:`1px solid ${v(p).accentColor}`})},"PINNED SERIES",4),(n(!0),i(g,null,L(K(_.value[w.value]),(t,r)=>(n(),i("th",{style:b({border:`1px solid ${v(p).accentColor}`}),key:r},f(t.name),5))),128))],2)]),l("tbody",null,[(n(!0),i(g,null,L(de.value,(t,r)=>(n(),i("tr",{key:r},[l("td",{style:b({border:`1px solid ${v(p).accentColor}`})},f(r+1),5),l("td",{style:b({border:`1px solid ${v(p).accentColor}`})},f(t.dropKey.split(".")[0]+"."+t.dropKey.split(".")[1]+"."+t.dropKey.split(".")[2]),5),(n(!0),i(g,null,L(t.deltas,(u,m)=>(n(),i("td",{key:m,style:b({border:`1px solid ${v(p).accentColor}`})},f(u.toFixed(2)),5))),128))]))),128))])])])],2)):D("",!0),B.value?(n(),i("div",qt,[l("div",{class:$(["leak-body",[`${v(p).mTheme}`]])},[l("button",{type:"button",onClick:e[5]||(e[5]=t=>B.value=!1),class:"leak-dismiss"},[c(s,{icon:"times"})]),l("div",{class:"l-left",style:b({width:N.value?"40%":"100%"})},[e[33]||(e[33]=l("h4",{style:{"font-weight":"bold"}},"Leak Analysis",-1)),e[34]||(e[34]=l("hr",null,null,-1)),M.value?(n(!0),i(g,{key:0},L(M.value,(t,r)=>(n(),i("div",{class:"analysis-set",key:r},[t!=!1?(n(),i(g,{key:0},[l("h6",null,[l("b",null,"Analysis on Dataset "+f(r+1),1)]),l("p",null,[e[31]||(e[31]=x(" Result: ")),t!=!1&&t.suspectLocation.leak?(n(),i(g,{key:0},[e[29]||(e[29]=l("b",{style:{color:"red"}},"Possible leak detected!",-1)),l("div",Zt,[l("table",Qt,[l("tr",null,[e[21]||(e[21]=l("th",{style:{border:"1px solid #ccc",padding:"10px"}},"Estimated Leak Point",-1)),t.suspectLocation.leakData.pu_location?(n(),i("th",Jt," PU ")):D("",!0),t.suspectLocation.leakData.coordinate?(n(),i("th",Xt," Coordinate ")):D("",!0)]),l("tbody",null,[l("tr",null,[l("td",el,f(t.suspectLocation.leakData.leak_point)+" KM ",1),t.suspectLocation.leakData.pu_location?(n(),i("td",tl," KM "+f(t.suspectLocation.leakData.pu_location),1)):D("",!0),t.suspectLocation.leakData.coordinate?(n(),i("td",ll,[e[23]||(e[23]=x(" LatLng: ")),l("code",null,f(t.suspectLocation.leakData.coordinate.latitude+", "+t.suspectLocation.leakData.coordinate.longitude),1),e[24]||(e[24]=l("br",null,null,-1)),e[25]||(e[25]=x(" DMS: ")),l("code",null,f(`${oe(t.suspectLocation.leakData.coordinate.latitude)}, ${oe(t.suspectLocation.leakData.coordinate.longitude)}`),1),e[26]||(e[26]=l("br",null,null,-1)),c(R,{onClick:u=>dt(`LATLNG: ${t.suspectLocation.leakData.coordinate.latitude}, ${t.suspectLocation.leakData.coordinate.longitude}
DMS: ${oe(t.suspectLocation.leakData.coordinate.latitude)}, ${oe(t.suspectLocation.leakData.coordinate.longitude)}`),style:{"margin-top":"5px"},"bt-disabled":!1,"bt-size":"small"},{default:C(()=>[c(s,{icon:"copy"}),e[22]||(e[22]=x(" Copy Coord "))]),_:2},1032,["onClick"])])):D("",!0)])])])]),t.suspectLocation.leakData.coordinate?D("",!0):(n(),i("p",al,[c(s,{icon:"info-circle"}),e[27]||(e[27]=x(" Map view and PU Location data is currently not supported for this line "))])),c(R,{onClick:u=>et(t.suspectLocation.leakData.coordinate,t.suspectLocation.leakData.leak_point,t.suspectLocation.leakData.pu_location),"bt-disabled":!t.suspectLocation.leakData.coordinate},{default:C(()=>[c(s,{icon:"map-marker"}),e[28]||(e[28]=x(" Pinpoint on Map"))]),_:2},1032,["onClick","bt-disabled"]),t.suspectLocation.leakData.coordinate?(n(),i("a",{key:1,class:"gmaps",target:"_blank",href:`https://www.google.com/maps?q=${t.suspectLocation.leakData.coordinate.latitude},${t.suspectLocation.leakData.coordinate.longitude}`,style:{"margin-left":"0.5rem"}},"Google Maps",8,ol)):D("",!0)],64)):(n(),i(g,{key:1},[e[30]||(e[30]=l("b",{style:{color:"#555"}},"No leak detected",-1)),l("ol",sl,[(n(!0),i(g,null,L(t.suspectLocation.probabilities,(u,m)=>(n(),i("li",{key:m},f(u),1))),128))])],64))])],64)):(n(),i("h6",nl,[l("b",null,"Analysis on Dataset "+f(r+1),1),e[32]||(e[32]=l("b",{style:{color:"#555"}},"Tidak ada indikasi",-1)),l("ol",il,[(n(!0),i(g,null,L(t.suspectLocation.probabilities,(u,m)=>(n(),i("li",{key:m},f(u),1))),128))])]))]))),128)):(n(),he(gt,{key:1,message:"Calculating leak probabilities..."}))],4),N.value?(n(),i("div",{key:0,class:"l-right",style:b({width:N.value?"60%":"100%",position:"relative"})},[e[35]||(e[35]=l("h4",{style:{"font-weight":"bold"}},"Map View",-1)),e[36]||(e[36]=l("hr",null,null,-1)),c(Re,{latitude:ee.value.latitude,longitude:ee.value.longitude,"leak-point":Se.value,"pu-location":Te.value},null,8,["latitude","longitude","leak-point","pu-location"])],4)):D("",!0)],2)])):D("",!0),Pe.value?(n(),i("div",rl,[l("button",{type:"button",onClick:ot,class:"leak-dismiss"},[c(s,{icon:"close"})]),e[40]||(e[40]=l("h5",{style:{"text-align":"center"}},[l("b",null,"History Data Playback")],-1)),c(o,null,{default:C(()=>[c(se,{style:{width:"400px"},"in-label":"Speed","model-value":Q.value,"onUpdate:modelValue":e[6]||(e[6]=t=>Q.value=t)},{default:C(()=>e[37]||(e[37]=[l("option",{value:"1000"},"Slowest",-1),l("option",{value:"500"},"Slower",-1),l("option",{value:"300"},"Moderate",-1),l("option",{value:"250"},"Faster",-1),l("option",{value:"200"},"Fastest",-1)])),_:1},8,["model-value"])]),_:1}),l("div",ul,[l("label",dl,[Ae(l("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>ge.value=t),type:"checkbox"},null,512),[[Fe,ge.value]]),e[38]||(e[38]=x(" Auto-replay "))]),l("label",cl,[Ae(l("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>ae.value=t),type:"checkbox"},null,512),[[Fe,ae.value]]),e[39]||(e[39]=x(" Autoplay on navigating "))])]),l("div",pl,[c(R,{"bt-disabled":!1,onClick:rt},{default:C(()=>[c(s,{icon:"backward"}),x("    "+f(be.value),1)]),_:1}),l("span",vl,[l("b",null,f(T.value),1)]),c(R,{"bt-disabled":!1,onClick:it},{default:C(()=>[x(f(me.value)+"    ",1),c(s,{icon:"forward"})]),_:1})]),l("div",{ref_key:"heatMap",ref:ne,style:{width:"100%",height:"600px"}},null,512),l("div",yl,[l("div",fl,[h.value?D("",!0):(n(),i("button",{key:0,onClick:e[9]||(e[9]=t=>h.value=!h.value),class:"controlbtn",type:"button"},[c(s,{icon:"play"})])),h.value?(n(),i("button",{key:1,onClick:e[10]||(e[10]=t=>h.value=!h.value),class:"controlbtn",type:"button"},[c(s,{icon:"pause"})])):D("",!0)]),l("div",ml,[l("input",{onChange:at,type:"range",min:0,max:S.value.length,value:k.value,class:"slider"},null,40,bl),l("span",gl,[l("span",{class:"slider-track",style:b({width:`${E.value}%`})},null,4)])]),l("div",null,[!h.value&&k.value==S.value.length?(n(),i("button",{key:0,onClick:le,class:"controlbtn",type:"button"},[c(s,{icon:"undo"})])):D("",!0)])])])):D("",!0),fe.value?(n(),i("div",hl,[l("div",xl,[l("button",{type:"button",onClick:st,class:"pbp-dismiss"},[c(s,{icon:"close"})]),e[41]||(e[41]=l("h3",null,[l("b",null,"Possible Leak Detected")],-1)),c(Re,{"leak-point":G.value.suspectLocation.leakData.leak_point,latitude:G.value.mapsLink.latitude,longitude:G.value.mapsLink.longitude,"pu-location":G.value.suspectLocation.leakData.pu_location},null,8,["leak-point","latitude","longitude","pu-location"])])])):D("",!0)],64)}}});export{Ol as default};
