import{d as E,h as t,k as N,r as T,o as h,c as w,a as o,e as a,n as f,u as p,m as _,A,w as U,p as $,l as j,F as P}from"./index-PBH4u9Dq.js";import{u as q}from"./theme-DoyiLm4z.js";import{_ as y}from"./InputView.vue_vue_type_style_index_0_lang-DOZ2lGzI.js";import{a as F,_ as I,B as L}from"./ThemeSetting.vue_vue_type_style_index_0_lang-C0Y4RBl1.js";import{m as O}from"./formValidator-OdL4bhgE.js";import{_ as z}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-B3mGvbzH.js";import{a as G}from"./axios-BimPEqV4.js";const K={class:f(["bl-wrapper"])},M={class:"bl-opt"},W={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-start","margin-bottom":"1rem"}},D={class:"form-group"},H={key:0,class:"lgwait-overlay"},se=E({__name:"LoginView",setup(J){const{vPassword:v,vEmail:g,checkValidation:V}=O(),i=t(!1),r=q(),l=t(""),n=t(""),u=t(!0),m=t(""),d=t(""),x=[m,d];m.value=g(l).message,d.value=v(n).message,N([l,n],()=>{m.value=g(l).message||"",d.value=v(n).message||"",u.value=V(x)},{immediate:!0});const k=t(!1),S=async()=>{if(!u.value){const b={username:l.value,password:n.value};try{const e=await G.post(_.baseEnd+"api/Auth/login",b),c=e.data.message,s=e.data.auth.token,C=e.data.auth.id;r.notifyAlertSuccess("Berhasil",c,"OK",()=>{localStorage.setItem("authToken",s),localStorage.setItem("userid",C),window.location.href="/fol/playback"})}catch(e){e.response&&r.notifyAlertError("Gagal",e.response.data.message,"Oke",()=>{})}}},B=()=>{i.value=!i.value};return(b,e)=>{const c=T("font-awesome-icon");return h(),w(P,null,[o(F,{visible:i.value,"onUpdate:visible":e[0]||(e[0]=s=>i.value=s)},null,8,["visible"]),a("div",K,[a("div",{class:f(["bl-inner",p(r).mTheme])},[a("div",M,[o(I),a("a",{class:f([p(r).textTheme]),onClick:B,href:"javascript:void(0)"},[o(c,{icon:"gear"})],2)]),a("div",W,[o(L,{style:{"padding-left":"1rem"},"site-name":p(_).appName},null,8,["site-name"])]),a("form",{onSubmit:A(S,["prevent"])},[o(y,{"in-label":"E-mail / Username","in-placeholder":"example@email.com","in-type":"text","in-required":!0,"in-helper":m.value,modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=s=>l.value=s)},null,8,["in-helper","modelValue"]),o(y,{"in-label":"Password","in-placeholder":"","in-type":"password","in-required":!0,"in-helper":d.value,modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s)},null,8,["in-helper","modelValue"]),a("div",D,[o(z,{"bt-type":"submit","bt-disabled":u.value},{default:U(()=>e[3]||(e[3]=[$("Sign-in")])),_:1},8,["bt-disabled"])])],32)],2)]),k.value?(h(),w("div",H,e[4]||(e[4]=[a("div",{class:"lgwait-inner"},[a("img",{style:{width:"200px",height:"200px","object-fit":"cover"},src:"https://cdn.dribbble.com/users/1186261/screenshots/3718681/media/1df2396f1eaa146bcb7dd3e73c1dc77b.gif"}),a("p",null,"Please wait")],-1)]))):j("",!0)],64)}}});export{se as default};
