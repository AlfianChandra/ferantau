import{u as _}from"./http-aSBkfQzS.js";import{h as v}from"./moment-zH0z38ay.js";import{d as f,P as l,Q as b,R as h,c as n,e as o,u as g,f as w,t as B,a as S,T,r as k,o as r}from"./index-DXmNhpZa.js";const I="/assets/batt-OzIihCY1.png",M={class:"battery-container"},Y={key:0,class:"batimg"},x=["src"],D={class:"bt-parent"},N={class:"bt-perc"},V={key:1,class:"batt-failed"},z=f({__name:"BatteryView",props:{idSpot:{type:[Number,String],required:!0}},setup(p){const d=p,t=l({}),i=l(!1);b(async()=>{await c().then(e=>{t.value=e,u()})});const u=()=>{if(t.value!=null&&t.value.timestamp!=null){const e=v().format("YYYY-MM-DDTHH:MM:SS").split("T")[0],a=t.value.timestamp.split("T")[0];e==a&&(i.value=!0)}},m=setInterval(async()=>{await c().then(e=>{t.value=e})},6e4);h(()=>{clearInterval(m)});const c=async()=>new Promise(async(e,a)=>{try{const s={idspot:d.idSpot},y=await _().httpPost("api/Battery/getbatterylevel",s);e(y)}catch(s){a(s)}});return(e,a)=>{const s=k("font-awesome-icon");return r(),n("div",M,[t.value&&i.value?(r(),n("div",Y,[o("img",{src:g(I),alt:"battery"},null,8,x),o("div",D,[o("span",{style:w({width:`${parseInt(t.value.batt)}%`}),class:"bt-child"},null,4),o("div",N,B(parseInt(t.value.batt))+"%",1)])])):(r(),n("span",V,[o("b",null,[S(s,{icon:"exclamation-triangle"}),a[0]||(a[0]=T(" Battery reading failed"))])]))])}}});export{z as _};
