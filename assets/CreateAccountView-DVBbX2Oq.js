import{d as B,N as a,Q as M,b as E,w as y,e as l,n as V,u as A,a as r,R as C,r as R,W,c as z,K as G,F as I,T as F,o as x}from"./index-ZVTH4BKL.js";import{u as K}from"./theme-qIFKuSvR.js";import{a as L}from"./index-Br0q4W-C.js";import{_ as v}from"./InputView.vue_vue_type_style_index_0_lang-CBKUpRfp.js";import{_ as Q}from"./MainWrapperView.vue_vue_type_style_index_0_lang-D57W4gcD.js";import{_ as j}from"./SelectView.vue_vue_type_style_index_0_lang-CX2QpMsG.js";import{_ as H}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-FKKPm2Td.js";import{m as J}from"./formValidator-OdL4bhgE.js";import{_ as O}from"./UiErrorItem.vue_vue_type_style_index_0_lang-MA-NAbRX.js";const X={class:"col-md-12"},Y={class:"col-md-5"},Z={class:"form-group"},me=B({__name:"CreateAccountView",setup(ee){const{vFullname:U,vPhone:P,vPassword:T,vEmail:k,vIsEmpty:q,checkValidation:D}=J(),n=K(),p=a(!0),c=a(),u=a(""),i=a(""),t=a(""),m=a(""),d=a(""),f=a(""),h=a(""),w=a(""),_=a(""),b=a(""),N=[f,w,b,h,_];M([t,u,m,d,i],()=>{f.value=U(u).message||"",h.value=q(i).message||"",w.value=k(t).message||"",_.value=T(m).message||"",b.value=P(d).message||"",p.value=D(N)},{immediate:!0});const S=async()=>{if(c.value="",!p.value)try{const o={fullname:u.value,password:m.value,email:t.value,phone:d.value,username:t.value,level:i.value},g=(await L.post(F.baseEnd+"api/user/createuser",o,{headers:F.headerSet})).data;n.notifyAlertSuccess("Success",g.message.content,"Dismiss",()=>{t.value="",u.value="",m.value="",i.value="",d.value=""})}catch(o){if(o.response)if(o.response.data.errors)if(o.response.data.errors.length!=0)c.value=o.response.data.errors,n.notifyAlertError("Failed","Got multiple errors. Check your inputs","Dismiss",()=>{});else{const e=o.response.data;n.notifyAlertError("Failed",e.message.content,"Dismiss",()=>{}),console.log(e)}else n.notifyAlertError("Failed",o.response.data.message.content,"Dismiss",()=>{})}};return(o,e)=>{const g=R("font-awesome-icon");return x(),E(Q,{"context-title":"Create Account","context-desc":"Create a new account, whether it intended for Admin or User"},{default:y(()=>[l("div",X,[l("h3",{class:V(A(n).textTheme)},e[5]||(e[5]=[l("b",null,"User's Account Detail",-1)]),2),l("p",{class:V(A(n).textTheme)},[r(g,{icon:"info-circle"}),e[6]||(e[6]=C(" Fill all required fields to create an account "))],2)]),l("div",Y,[l("form",{onSubmit:W(S,["prevent"])},[r(v,{"in-label":"Full Name","in-required":!0,"in-type":"text","model-value":u.value,"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),"in-placeholder":"User's full name. Text only","in-helper":f.value},null,8,["model-value","in-helper"]),r(v,{"in-label":"E-Mail","in-required":!0,"in-type":"text","model-value":t.value,"onUpdate:modelValue":e[1]||(e[1]=s=>t.value=s),"in-placeholder":"example@email.com","in-helper":w.value},null,8,["model-value","in-helper"]),r(v,{"in-label":"Password","in-required":!0,"in-type":"password","model-value":m.value,"onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s),"in-placeholder":"Min. 8 chars password length","in-helper":_.value},null,8,["model-value","in-helper"]),r(j,{"in-helper":h.value,"model-value":i.value,"onUpdate:modelValue":e[3]||(e[3]=s=>i.value=s),"in-label":"Account Type","in-required":!0},{default:y(()=>e[7]||(e[7]=[l("option",{value:""},"Select...",-1),l("option",{value:"webmaster"},"Webmaster",-1),l("option",{value:"user"},"User",-1),l("option",{value:"customer"},"Customer",-1)])),_:1},8,["in-helper","model-value"]),r(v,{"in-label":"Phone","in-required":!0,"in-type":"text","model-value":d.value,"onUpdate:modelValue":e[4]||(e[4]=s=>d.value=s),"in-placeholder":"+628","in-helper":b.value},null,8,["model-value","in-helper"]),l("div",Z,[(x(!0),z(I,null,G(c.value,(s,$)=>(x(),E(O,{key:$,"error-message":s.msg},null,8,["error-message"]))),128))]),r(H,{"bt-type":"submit","bt-disabled":p.value},{default:y(()=>e[8]||(e[8]=[C("Create!")])),_:1},8,["bt-disabled"])],32)])]),_:1})}}});export{me as default};
