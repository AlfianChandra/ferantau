import{d as Me,h as r,i as Ye,k as A,o as s,c as i,e as l,t as b,_ as ft,B as bt,r as Ee,a as p,w as $,F as _,y as P,n as V,u as v,f as w,b as Ve,l as L,p as C,x as ze,K as Ke,m as gt}from"./index-BcdnIYm6.js";import{_ as Ae}from"./InputView.vue_vue_type_style_index_0_lang-BzZGqbwk.js";import{_ as ht}from"./MainWrapperView.vue_vue_type_style_index_0_lang-pSJpd9SW.js";import{u as Ge}from"./theme-DX6Qs_bN.js";import{_ as ke}from"./SelectView.vue_vue_type_style_index_0_lang-h7XJf315.js";import{_ as B}from"./ButtonView.vue_vue_type_style_index_0_computed_true_lang-D-qkA7uV.js";import{h as xt}from"./moment-C5S46NFB.js";import{a as kt}from"./axios-BimPEqV4.js";import{_ as Ue}from"./CheckboxView.vue_vue_type_style_index_0_computed_true_lang-D989QMIN.js";import{a as wt}from"./spotModel-j1Hfa2-n.js";import{t as _t,_ as Be,u as St}from"./trunk-DSVHHjO9.js";import{i as We}from"./index-CehbAW_K.js";const Ct="/assets/mapview_rtu-BOpd48i8.jpg",Dt=Me({__name:"HistoryECharts",props:{chartData:{type:Object,required:!0},selectedSpot:{type:String,required:!0},toleranceValue:{type:Number,required:!1,default:0},trunkLength:{type:Number,required:!0},predictionResult:{type:Object,required:!1}},emits:["onToleranceChanged"],setup(ve,{emit:Y}){const q=Y,H=_t(),z=r(H.getAllTrunk()),T=Ge(),D=r(null),G=r(null),I=r([]),g=ve,h=r(g.toleranceValue),M=r({title:{left:"center",textStyle:{fontSize:14,fontWeight:"bold",color:T.accentColorSecondary}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},backgroundColor:"rgba(255, 255, 255, 0.8)",position:function(y,c,k,f,O){var j={top:10};return j[["left","right"][+(y[0]<O.viewSize[0]/2)]]=30,j.toFixed(2)},extraCssText:"width: 170px"},axisPointer:{link:{xAxisIndex:"all"},label:{backgroundColor:"#777"}},legend:{data:[],bottom:0,textStyle:{color:T.accentColor}},grid:{left:"8%",right:"0%",bottom:"22%",top:60,height:"61%"},xAxis:[{type:"value",min:0,max:0,position:"bottom",interval:.05,axisLabel:{formatter:y=>{const c=z.value[g.selectedSpot].spot;for(let k=0;k<c.length;k++)if(y===+c[k].pos)return`${c[k].name}`},rotate:45,fontSize:10,color:T.accentColorSecondary},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{color:T.accentColorSecondary}},axisLine:{show:!0,lineStyle:{color:T.accentColorSecondary}},splitLine:{show:!1,lineStyle:{color:"#00000011"}},minorTick:{show:!1},minorSplitLine:{show:!1,lineStyle:{color:"#00000011"}}}],yAxis:{name:"Pressure (PSI)",nameLocation:"middle",max:z.value[g.selectedSpot].spot.maxY,nameGap:40,minorTick:{show:!0,splitNumber:5,lineStyle:{color:T.accentColorSecondary}},minorSplitLine:{show:!0,lineStyle:{color:"#00000011"}},type:"value",axisLabel:{textStyle:{color:T.accentColorSecondary}},axisLine:{lineStyle:{color:T.accentColorSecondary}},axisTick:{show:!0,lineStyle:{color:T.accentColorSecondary}},splitLine:{lineStyle:{type:"dotted"}}},series:[]}),R=async()=>{const y=await Z(g.chartData);ye(y)},Z=y=>new Promise((c,k)=>{try{const f=[],O=z.value[g.selectedSpot].spot;Object.keys(y).forEach(j=>{const ee=y[j].data,te=ee.map((W,K)=>{const le=+O[K].pos,J=+parseFloat(W.avgPsiValues).toFixed(2);return[le,J]});if(y[j].type==="normal"){let W=[];for(let K=0;K<ee.length;K++){const le=+O[K].pos,J=+parseFloat(ee[K].avgPsiValues).toFixed(2),m=h.value/100*J,ae=+(J-m).toFixed(2);W.push([le,ae])}f.push(te),f.push(W)}else f.push(te)}),c(f)}catch(f){k(f)}}),ye=y=>{I.value=[];const c=y.map((k,f)=>f===0?{name:"Normal",type:"line",xAxisIndex:0,data:k,smooth:!0,itemStyle:{color:T.accentColor}}:f===1?{name:"Drop Tolerance",type:"line",xAxisIndex:0,data:k,smooth:!0,itemStyle:{color:"red"},lineStyle:{width:1,type:"dashed"}}:{name:"Actual Drop "+(f-1),type:"line",xAxisIndex:0,data:k,smooth:!0});if(M.value.legend.data=c.map(k=>k.name),M.value.xAxis[0].min=0,M.value.xAxis[0].max=g.trunkLength,M.value.xAxis[1]={type:"value",min:0,max:g.trunkLength,name:"Pipeline (KM)",nameLocation:"middle",interval:2,nameGap:30,nameTextStyle:{color:T.accentColorSecondary,fontSize:12},position:"top",axisLabel:{formatter:"{value}",textStyle:{color:T.accentColorSecondary}}},g.predictionResult)for(let k=0;k<g.predictionResult.length;k++){const f=parseFloat(g.predictionResult[k].suspectLocation.leakData.leak_point);c.push({name:"Leakage",type:"line",xAxisIndex:1,data:[],markLine:{symbol:"diamond",lineStyle:{type:"dashed",color:"red"},label:{show:!0,formatter:`>> ${f} KM`,position:"insideEndTop"},data:[{xAxis:f}]}}),I.value.push(f)}M.value.series=c,G.value&&(G.value.setOption(M.value),console.log(G.value.getOption().series))};return Ye(()=>{G.value=We(D.value),h.value=0,R().catch(y=>{console.error(y)})}),setTimeout(()=>{h.value=2.5,q("onToleranceChanged",h.value)},3e3),A(()=>g.chartData,async()=>{await R()}),A(()=>h.value,async()=>{await R()}),A(()=>g.toleranceValue,()=>{h.value=g.toleranceValue}),A(()=>g.predictionResult,async()=>{await R()}),(y,c)=>(s(),i("div",{ref_key:"chart",ref:D,style:{width:"100%",height:"500px"}},null,512))}}),Lt={class:"loading"},$t={style:{"margin-left":"10px"}},Tt=Me({__name:"LoadingView",props:{message:{type:String,default:"Loading..."}},setup(ve){const Y=ve;return(q,H)=>(s(),i("div",Lt,[H[0]||(H[0]=l("img",{src:"https://i.pinimg.com/originals/ee/7a/ce/ee7acee141cf774b5511f8c3cb0e0016.gif",style:{width:"70px",height:"70px","object-fit":"contain"}},null,-1)),l("span",$t,b(Y.message),1)]))}}),Pt=ft(Tt,[["__scopeId","data-v-c347c2fb"]]),Vt={class:"col-md-3"},At=["value"],Mt={style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"1rem"}},Ft={style:{display:"flex","flex-flow":"row nowrap",gap:"1rem","align-items":"center"}},Rt={class:"col-md-12",style:{"padding-bottom":"6rem"}},Ot={class:"table-responsive"},Nt={style:{display:"flex","flex-flow":"row nowrap","justify-content":"flex-end",gap:"1rem"}},It={style:{display:"flex","flex-flow":"row wrap","justify-content":"flex-end","align-items":"center",gap:"0.5rem","margin-bottom":"1rem",border:"1px solid #ccc",width:"fit-content",padding:"10px","border-radius":"100px"}},jt={style:{display:"flex","flex-flow":"row nowrap","align-items":"center"}},Et={style:{display:"flex","flex-flow":"row nowrap","align-items":"center"}},zt={class:"tbl"},Kt={class:"theads"},Ut={style:{display:"flex","flex-flow":"column",width:"150px"}},Bt={style:{"font-size":"14px","font-weight":"bold"}},Yt={key:1,style:{color:"#ccc"}},Gt={style:{display:"flex","flex-flow":"row nowrap"}},Wt={style:{width:"100%",display:"flex","flex-flow":"column"}},qt=["src"],Ht={class:"col-md-12",style:{"margin-bottom":"1rem","margin-top":"2rem"}},Zt={class:"table-responsive"},Jt={style:{"margin-top":"1rem"}},Qt={class:"tbl2"},Xt=["onClick"],el={style:{"margin-top":"1rem"}},tl={class:"tbl2"},ll={key:1,class:"leak-window"},al={class:"table-responsive"},ol={style:{width:"100%","margin-top":"1rem"},class:"table table-striped table-hover;"},nl={key:0,style:{border:"1px solid #ccc",padding:"10px"}},sl={key:1,style:{border:"1px solid #ccc",padding:"10px"}},il={style:{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}},rl={key:0,style:{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}},ul={key:1,style:{"font-weight":"bold",border:"1px solid #ccc",padding:"10px"}},cl={key:0},dl=["href"],pl={style:{"margin-top":"1rem"}},vl={key:1},yl={style:{"margin-top":"1rem"}},ml={key:2,class:"playback-controller"},fl={style:{display:"flex","flex-flow":"row nowrap",gap:"0.5rem"}},bl={style:{cursor:"pointer",padding:"10px",border:"1px solid #ccc","margin-bottom":"1rem","border-radius":"10px"}},gl={style:{cursor:"pointer",padding:"10px",border:"1px solid #ccc","margin-bottom":"1rem","border-radius":"10px"}},hl={style:{"border-radius":"10px",display:"flex","flex-flow":"row nowrap","justify-content":"space-between","padding-left":"10px","padding-right":"10px",border:"1px solid #ccc",padding:"20px","margin-bottom":"1rem"}},xl={style:{border:"1px solid #ccc",padding:"10px","padding-left":"40px","padding-right":"40px","border-radius":"100px"}},kl={style:{display:"flex","flex-flow":"row nowrap",width:"100%","align-items":"center"}},wl={style:{display:"flex","flex-flow":"no wrap",padding:"10px",gap:"0.5rem"}},_l={style:{width:"100%",padding:"10px",position:"relative"}},Sl=["max","value"],Cl={class:"slider-highlight"},Dl={key:4,class:"pb-prompt"},Ll={class:"pbp-inner"},El=Me({__name:"HistorySplittedFol",setup(ve){const Y=r(),q=r(),H=St(),z=r("randfor"),T=wt(),D=r("trunk1"),G=r(!0),I=r([]),g=r([]),h=r(0),M=r(0),R=r(0),Z=r(500),ye=r(""),y=r({trunk1:{name:"RANTAU TRUNKLINE",spots:[]}});Ye(async()=>{ee(),await T.getSpotsWithTresholds().then(async a=>{Object.keys(a).forEach(e=>{y.value.trunk1.spots.push(a[e])}),y.value.trunk1.trunkLength=63.3,setTimeout(async()=>{await ne()},500)})});const c=Ge(),k=r(60),f=r(),O=r([]),j=r(!1);c.asideToggle(!1);const ee=()=>{const a=new Date,e=a.getFullYear(),n=String(a.getMonth()+1).padStart(2,"0"),o=String(a.getDate()).padStart(2,"0"),t=`${e}-${n}-${o}`;f.value=t};A(()=>[f.value,k.value,D.value],async()=>{G.value||await ne()});const te=async a=>new Promise(async(e,n)=>{try{const o=y.value[D.value];let t=[];for(let x=0;x<o.spots.length;x++)t.push(o.spots[x].id);const u={datefilter:a,timeFilter:k.value,idFilter:t},d=await kt.post(gt.baseEnd+"api/History/getsplittedhistdata",u);G.value=!1,e(d.data)}catch(o){n(o)}}),W=r({});function K(a){const e={};return a.forEach(n=>{n.data.forEach(o=>{const{idSpot:t,avgPsiValues:u}=o;e[t]?(u>e[t].maxValue&&(e[t].maxValue=u),u<e[t].minValue&&(e[t].minValue=u)):e[t]={maxValue:u,minValue:u}})}),W.value=e,W.value}const le=bt(()=>K(O.value));function J(a,e){const n=le.value;if(!n[e])return"";const o=a.data.find(t=>t.idSpot===e);if(o){if(o.avgPsiValues===n[e].maxValue)return"highest-value";if(o.avgPsiValues===n[e].minValue)return"lowest-value"}return""}const m=r({});let ae=null;const N=r(null),we=r({});A(()=>m.value,()=>{if(ae=Object.keys(m.value),oe(),N.value!=null){we.value=[];const a=N.value,e=m.value[a].data;ae.filter(o=>o!==a).forEach(o=>{const t=m.value[o].data,u=[];y.value[D.value].spots.forEach((d,x)=>{const F=d.id,X=e.find(pe=>pe.idSpot===F),je=t.find(pe=>pe.idSpot===F);if(X&&je){const pe=X.avgPsiValues.toFixed(2)-je.avgPsiValues.toFixed(2);u[x]=pe}else u[x]=0}),we.value.push({dropKey:o,deltas:u})})}});const Fe=(a,e,n)=>{const o=e.timeRange,t=e.type,u=e.rangeData,d=e.dateFilter;a?(m.value[o+"."+t+"."+d]={timerange:o,type:t,checkbox:n,data:u,date:d},t==="normal"&&(N.value=o+"."+t+"."+d),m.value=Re(m.value),oe()):(delete m.value[o+"."+t+"."+d],t==="normal"&&N.value===o+"."+t+"."+d&&(N.value=null),m.value=Re(m.value),Qe(!0))},Re=a=>{const e=Object.entries(a);return e.sort((o,t)=>o[1].type==="normal"&&t[1].type!=="normal"?-1:o[1].type!=="normal"&&t[1].type==="normal"?1:0),Object.fromEntries(e)},qe=a=>a.type==="normal"?N.value!==null&&N.value!==a.timeRange+"."+a.type+"."+a.date:!1,oe=()=>{Object.keys(m.value).length>1?j.value=!0:j.value=!1},He=async()=>{O.value=[],_e(),oe(),await ne().then(()=>{}).catch(a=>{console.log(a)})},ne=async()=>{_e(),O.value=[];try{let e=[...await te(f.value)];if(I.value.length>0)for(let n=0;n<I.value.length;n++){const o=I.value[n];if(o!==null){if(o.value!==f.value){const t=await te(o.value);e=e.concat(t)}}else console.log("Null")}O.value=e,g.value=e}catch(a){console.log(a)}},Ze=()=>{_e(),oe()},_e=()=>{Object.keys(m.value).forEach(a=>{const e=m.value[a].checkbox;e.checked=!1}),N.value=null,m.value={},oe()},me=r(),Je=async(a,e)=>{const n=a.map((d,x)=>{const F=d.length>1?d.map(X=>Number(X)||0):[0];return x==0?{name:"Normal",type:"line",data:F,smooth:!0}:{name:"Drop "+x,type:"line",data:F,smooth:!0}});let o=[];for(let d=0;d<y[D.value].spots.length;d++)o.push(y[D.value].spots[d].name);const t=await Promise.all(n);t.sort((d,x)=>d.name==="Normal"?-1:x.name==="Normal"?1:0);const u={toolbox:{show:!0,orient:"vertical",feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},tooltip:{trigger:"item",axisPointer:{type:"cross"}},grid:{left:"10%",right:"10%",bottom:"10%",containLabel:!0},legend:{show:!0},xAxis:{type:"category",data:o,axisLabel:{show:!0,rotate:45},boundaryGap:!1,axisTick:{alignWithLabel:!0}},yAxis:{name:"Pressure (PSI)",nameTextStyle:{verticalAlign:"middle"},axisTick:{show:!0,inside:!0},type:"value",axisLine:{show:!0}},series:t};if(!e)me.value.setOption(u);else{let d={toolbox:{show:!0,orient:"vertical",feature:{dataZoom:{yAxisIndex:"none"},dataView:{readOnly:!1},magicType:{type:["line","bar"]},restore:{},saveAsImage:{}}},tooltip:{trigger:"item",axisPointer:{type:"cross"}},grid:{left:"10%",right:"10%",bottom:"10%",containLabel:!0},legend:{show:!0},xAxis:{type:"category",data:o,axisLabel:{show:!0,rotate:45},boundaryGap:!1,axisTick:{alignWithLabel:!0}},yAxis:{name:"Pressure (PSI)",nameTextStyle:{verticalAlign:"middle"},axisTick:{show:!0,inside:!0},type:"value",axisLine:{show:!0}},series:t};me.value.clear(),me.value.setOption(d)}},Qe=(a=!1)=>{if(me.value){let e=[];Object.keys(m.value).forEach(n=>{const o=m.value[n].data;let t=[];for(let u=0;u<o.length;u++)t.push(parseFloat(o[u].avgPsiValues).toFixed(2));e.push(t)}),Je(e,a)}},Oe=(a,e)=>{const o=m.value[a].data;for(let t=0;t<o.length;t++)if(o[t].idSpot==e)return o[t].avgPsiValues.toFixed(2)},se=a=>a.spots,Xe=(a,e)=>{const n=m.value[e],o=n.timerange,t=n.type,u=n.date;t==="normal"&&N.value===o+"."+t+"."+u&&(N.value=null),a.checked=!1;const d={...m.value};delete d[e],m.value=d},ie=r(0),et=()=>{ie.value++,I.value.push(null)},tt=async()=>{ie.value>0&&(ie.value--,I.value.pop()),await ne()},lt=async(a,e)=>{I.value[e]=a,await ne()};r(0);const re=r(!1),Se=r([]),U=r([]),Q=r(!1),fe=r(),at=r(),ot=async()=>{Se.value=[],console.log(m.value);const a=H.predict(m.value,z.value);re.value=!0,z.value==="randfor"?setTimeout(()=>{U.value=a},4e3):U.value=a;for(let e=0;e<U.value.length;e++)U.value[e].suspectLocation.leak&&Se.value.push(U.value[e])},Ne=r(),Ie=r(),nt=(a,e,n)=>{fe.value=a,Q.value=!1,Q.value=!0,Ne.value=e,Ie.value=n};A(()=>re.value,()=>{re.value||(Q.value=!1,U.value=null,fe.value=null,at.value=null)}),A(()=>Y.value,()=>{st(),ce(h.value)});const st=()=>{q.value=We(Y.value);const a={grid:{top:"10%",left:"10%",right:"10%",bottom:"15%"},legend:{show:!0,type:"scroll",orient:"horizontal"},xAxis:{type:"category",data:[],boundaryGap:!1,axisLabel:{rotate:45,labelStyle:{fontSize:10}},splitLine:{show:!0,lineStyle:{type:"dashed"}},axisTick:{alignWithLabel:!0}},yAxis:{type:"value",name:"Pressure (PSI)",nameGap:10,max:600,axisTick:{show:!0,inside:!0}},series:[]};q.value.setOption(a)};let Ce=[];const be={},De=r([]),ue=r({}),it=r(),ce=a=>{Ce=[];for(let o of y.value[D.value].spots)be[o.name]=[];g.value.slice(0,a+1).forEach((o,t)=>{const u=`${o.dateFilter} (${o.timeRange})`;Ce.push(u),it.value=u,o.data.forEach(d=>{const x=y.value[D.value].spots.find(X=>X.id===d.idSpot).name,F=d.avgPsiValues??0;be[x][t]=Number(F.toFixed(2))})});const n=Object.keys(be).map(o=>({name:o,type:"line",data:be[o],symbol:"none",smooth:!1,tooltip:{trigger:"axis",formatter:function(t){return t[0].value}},endLabel:{show:!0,formatter:function(t){return t.value},color:"#000",backgroundColor:"inherit",padding:5,borderRadius:5}}));q.value.setOption({xAxis:{data:Ce},series:n})},de=r(!1),S=r(!1),rt=a=>{S.value=!1,De.value=[],h.value=parseInt(a.target.value,10),ce(h.value),R.value=h.value/g.value.length*100};let E=null;A(()=>[S.value,Z.value],()=>{S.value?(E!=null&&clearInterval(E),E=setInterval(()=>{h.value<g.value.length?(h.value++,g.value[h.value]!=null&&(ce(h.value),R.value=h.value/g.value.length*100)):(S.value=!1,clearInterval(E))},Z.value)):E&&(clearInterval(E),E=null)});const ut=()=>{de.value=!1,S.value=!1,h.value=0,De.value=[],clearInterval(E),ce(h.value),R.value=h.value/g.value.length*100},ge=()=>{S.value=!1,h.value=0,De.value=[],clearInterval(E),ce(h.value),R.value=h.value/g.value.length*100},Le=r(!1);A(()=>ue.value,()=>{S.value=!1,Le.value=!0},{deep:!0});const ct=()=>{Le.value=!1,S.value=!0},dt=()=>y.value[D.value].trunkLength,$e=r(""),Te=r(""),Pe=r(!0),he=r(!1);A(()=>f.value,()=>{const a=xt(f.value),e=a.add(1,"days").format("YYYY-MM-DD"),n=a.subtract(2,"days").format("YYYY-MM-DD");$e.value=e,Te.value=n});const pt=()=>{f.value=$e.value,ge(),he.value&&(S.value=!0)},vt=()=>{f.value=Te.value,ge(),he.value&&(S.value=!0)};A(()=>S.value,()=>{!S.value&&h.value==g.value.length&&Pe.value&&(ge(),S.value=!0)});const yt=a=>{M.value=a},xe=a=>{const e=Math.floor(a),n=Math.abs(a-e)*60,o=Math.floor(n),t=(n-o)*60;return`${e}° ${o}' ${t.toFixed(2)}"`},mt=async a=>{ye.value=a,await navigator.clipboard.writeText(ye.value),c.notifyShow("Coordinate copied to clipboard")};return(a,e)=>{const n=Ee("font-awesome-icon"),o=Ee("center");return s(),i(_,null,[p(ht,{"context-title":"FOL | Splitted History Data"},{default:$(()=>[l("div",Vt,[p(ke,{"in-label":"Select Line","model-value":D.value,"onUpdate:modelValue":e[0]||(e[0]=t=>D.value=t)},{default:$(()=>[(s(!0),i(_,null,P(Object.keys(y.value),(t,u)=>(s(),i("option",{key:u,value:t},b(y.value[t].name),9,At))),128))]),_:1},8,["model-value"]),p(ke,{"in-label":"Time Range","model-value":k.value,"onUpdate:modelValue":e[1]||(e[1]=t=>k.value=t)},{default:$(()=>e[12]||(e[12]=[l("option",{value:"1"},"1 Menit",-1),l("option",{value:"2"},"2 Menit",-1),l("option",{value:"3"},"3 Menit",-1),l("option",{value:"4"},"4 Menit",-1),l("option",{value:"5"},"5 Menit",-1),l("option",{value:"10"},"10 Menit",-1),l("option",{value:"15"},"15 Menit",-1),l("option",{value:"30"},"30 Menit",-1),l("option",{value:"60"},"60 Menit",-1)])),_:1},8,["model-value"]),l("div",Mt,[p(Ae,{"in-type":"date","in-label":"Date Filter","model-value":f.value,"onUpdate:modelValue":e[2]||(e[2]=t=>f.value=t),style:{width:"100%"}},null,8,["model-value"])]),l("div",Ft,[p(B,{onClick:tt,"bt-size":"small","bt-type":"button","bt-disabled":!1},{default:$(()=>[p(n,{icon:"minus"})]),_:1}),l("span",{class:V([`${v(c).textTheme}`])},b(ie.value),3),p(B,{onClick:et,"bt-size":"small","bt-type":"button","bt-disabled":!1},{default:$(()=>[p(n,{icon:"plus"})]),_:1})]),(s(!0),i(_,null,P(ie.value,(t,u)=>(s(),i("div",{key:u,style:{display:"flex","flex-flow":"row nowrap","align-items":"center",gap:"1rem"}},[p(Ae,{"in-type":"date","in-label":`Date Filter ${t}`,onOnValueChange:d=>lt(d,u),style:{width:"100%"}},null,8,["in-label","onOnValueChange"])]))),128))]),l("div",Rt,[l("div",Ot,[l("div",Nt,[l("div",It,[l("div",jt,[e[13]||(e[13]=l("div",{style:{"background-color":"green",width:"20px",height:"20px","border-radius":"100px"}},null,-1)),l("span",{class:V([`${v(c).textTheme}`]),style:{"margin-left":"0.2rem","font-size":"12px","font-weight":"bold"}},"Nilai Tertinggi",2)]),l("div",Et,[e[14]||(e[14]=l("div",{style:{"background-color":"red",width:"20px",height:"20px","border-radius":"100px"}},null,-1)),l("span",{class:V([`${v(c).textTheme}`]),style:{"margin-left":"0.2rem","font-size":"12px","font-weight":"bold"}},"Nilai Terendah",2)])]),p(B,{onClick:He,"bt-disabled":!1,"bt-type":"button","bt-size":"small",style:{height:"42px",width:"42px","border-radius":"100px",display:"flex","flex-flow":"row nowrap","align-items":"center"}},{default:$(()=>[p(n,{icon:"refresh"})]),_:1})]),l("table",zt,[l("thead",Kt,[l("tr",{style:{padding:"20px"},class:V([`${v(c).textTheme}`])},[l("th",{style:w({border:`1px solid ${v(c).accentColor}`})},[p(n,{icon:"check-double"})],4),l("th",{style:w({border:`1px solid ${v(c).accentColor}`})},"Interval",4),(s(!0),i(_,null,P(se(y.value[D.value]),(t,u)=>(s(),i("th",{style:w({border:`1px solid ${v(c).accentColor}`}),key:u},b(t.name),5))),128))],2)]),l("tbody",null,[(s(!0),i(_,null,P(O.value,(t,u)=>(s(),i("tr",{key:u},[l("td",{style:w({border:`1px solid ${v(c).accentColor}`,width:"150px"}),class:V([`${v(c).textTheme}`])},[l("div",Ut,[p(Ue,{cb_disabled:qe({timeRange:t.timeRange,type:"normal"}),cb_data:{timeRange:t.timeRange,type:"normal",rangeData:t.data,dateFilter:t.dateFilter},onOnCheckBoxChange:Fe,cb_label:"Normal"},null,8,["cb_disabled","cb_data"]),p(Ue,{cb_disabled:!1,cb_checked:!1,cb_data:{timeRange:t.timeRange,type:"drop",rangeData:t.data,dateFilter:t.dateFilter},onOnCheckBoxChange:Fe,cb_label:"Drop"},null,8,["cb_data"])])],6),l("td",{style:w({border:`1px solid ${v(c).accentColor}`}),class:V([`${v(c).textTheme}`])},[l("span",Bt,b(t.dateFilter),1),e[15]||(e[15]=l("br",null,null,-1)),C(b(t.timeRange),1)],6),(s(!0),i(_,null,P(se(y.value[D.value]),(d,x)=>(s(),i("td",{style:w({border:`1px solid ${v(c).accentColor}`,position:"relative"}),key:x,class:V([`${J(t,d.id)}`,`${v(c).textTheme}`])},[t.data.find(F=>F.idSpot===d.id)?(s(),i(_,{key:0},[C(b(t.data.find(F=>F.idSpot===d.id).avgPsiValues.toFixed(2)),1)],64)):(s(),i("span",Yt,"N/A"))],6))),128))]))),128))])])])])]),_:1}),j.value?(s(),i("div",{key:0,class:V(["chart-container",[`${v(c).mTheme}`]])},[l("button",{onClick:Ze,class:"chc-dismiss",style:w({color:`${v(c).accentColor}`})},[p(n,{icon:"close"})],4),l("div",Gt,[l("div",Wt,[p(o,null,{default:$(()=>[p(Ae,{"in-label":"Drop Tolerance Value","in-type":"number","model-value":M.value,"onUpdate:modelValue":e[3]||(e[3]=t=>M.value=t),style:{width:"200px"}},null,8,["model-value"])]),_:1}),Object.keys(m.value).length?(s(),Ve(Dt,{key:0,onOnToleranceChanged:yt,"chart-data":m.value,"selected-spot":D.value,"trunk-length":dt(),"tolerance-value":M.value,"prediction-result":Se.value},null,8,["chart-data","selected-spot","trunk-length","tolerance-value","prediction-result"])):L("",!0)])]),l("img",{src:v(Ct),alt:"map",style:{width:"100%",height:"600px","border-radius":"10px","object-fit":"contain"}},null,8,qt),l("div",Ht,[p(o,null,{default:$(()=>[p(ke,{"in-label":"Prediction Method","model-value":z.value,"onUpdate:modelValue":e[4]||(e[4]=t=>z.value=t)},{default:$(()=>e[16]||(e[16]=[l("option",{value:"randfor"},"MeLan",-1),l("option",{value:"dynamic"},"Dynamic",-1),l("option",{value:"static"},"Static",-1)])),_:1},8,["model-value"]),Object.keys(m.value).length>1?(s(),Ve(B,{key:0,"bt-type":"button","bt-disabled":!1,onClick:ot},{default:$(()=>[p(n,{icon:"water"}),e[17]||(e[17]=C(" Estimate Leak Location "))]),_:1})):L("",!0)]),_:1})]),l("div",Zt,[l("h5",Jt,[l("b",null,[p(n,{icon:"oil-well"}),e[18]||(e[18]=C(" Selected Pressures"))])]),l("table",Qt,[l("thead",null,[l("tr",{style:{padding:"5px"},class:V([`${v(c).textTheme}`])},[l("th",{style:w({border:`1px solid ${v(c).accentColor}`})},"ACTION",4),l("th",{style:w({border:`1px solid ${v(c).accentColor}`})},"PINNED SERIES",4),(s(!0),i(_,null,P(se(y.value[D.value]),(t,u)=>(s(),i("th",{style:w({border:`1px solid ${v(c).accentColor}`}),key:u},b(t.name),5))),128))],2)]),l("tbody",null,[(s(!0),i(_,null,P(v(ae),(t,u)=>(s(),i("tr",{key:u},[l("td",{style:w({border:`1px solid ${v(c).accentColor}`,position:"relative",textTransform:"uppercase",fontWeight:"bold"})},[l("button",{onClick:d=>Xe(m.value[t].checkbox,t),class:"remove-series",type:"button"},[p(n,{icon:"close"})],8,Xt)],4),l("td",{class:V([`${v(c).textTheme}`]),style:w({border:`1px solid ${v(c).accentColor}`,position:"relative",textTransform:"uppercase",fontWeight:"bold"})},[C(b(m.value[t].date),1),e[19]||(e[19]=l("br",null,null,-1)),C(" "+b(m.value[t].timerange),1),e[20]||(e[20]=l("br",null,null,-1)),C(" "+b(m.value[t].type),1)],6),(s(!0),i(_,null,P(se(y.value[D.value]),(d,x)=>(s(),i("td",{style:w({border:`1px solid ${v(c).accentColor}`}),class:V([`${v(c).textTheme}`]),key:x},[Oe(t,d.id)?(s(),i(_,{key:0},[C(b(Oe(t,d.id)),1)],64)):(s(),i(_,{key:1},[C("0.00")],64))],6))),128))]))),128))])]),l("h5",el,[l("b",null,[p(n,{icon:"turn-down"}),e[21]||(e[21]=C(" Delta"))])]),l("table",tl,[l("thead",null,[l("tr",{style:{padding:"5px"},class:V([`${v(c).textTheme}`])},[l("th",{style:w({border:`1px solid ${v(c).accentColor}`})},"DROPS",4),l("th",{style:w({border:`1px solid ${v(c).accentColor}`})},"PINNED SERIES",4),(s(!0),i(_,null,P(se(y.value[D.value]),(t,u)=>(s(),i("th",{style:w({border:`1px solid ${v(c).accentColor}`}),key:u},b(t.name),5))),128))],2)]),l("tbody",null,[(s(!0),i(_,null,P(we.value,(t,u)=>(s(),i("tr",{key:u},[l("td",{style:w({border:`1px solid ${v(c).accentColor}`})},b(u+1),5),l("td",{style:w({border:`1px solid ${v(c).accentColor}`})},b(t.dropKey.split(".")[0]+"."+t.dropKey.split(".")[1]+"."+t.dropKey.split(".")[2]),5),(s(!0),i(_,null,P(t.deltas,(d,x)=>(s(),i("td",{key:x,style:w({border:`1px solid ${v(c).accentColor}`})},b(d.toFixed(2)),5))),128))]))),128))])])])],2)):L("",!0),re.value?(s(),i("div",ll,[l("div",{class:V(["leak-body",[`${v(c).mTheme}`]])},[l("button",{type:"button",onClick:e[5]||(e[5]=t=>re.value=!1),class:"leak-dismiss"},[p(n,{icon:"times"})]),l("div",{class:"l-left",style:w({width:Q.value?"40%":"100%"})},[e[34]||(e[34]=l("h4",{style:{"font-weight":"bold"}},"Leak Analysis",-1)),e[35]||(e[35]=l("hr",null,null,-1)),U.value?(s(!0),i(_,{key:0},P(U.value,(t,u)=>(s(),i("div",{class:"analysis-set",key:u},[t!=!1?(s(),i(_,{key:0},[l("h6",null,[l("b",null,"Analysis on Dataset "+b(u+1),1)]),l("p",null,[e[32]||(e[32]=C(" Result: ")),t!=!1&&t.suspectLocation.leak?(s(),i(_,{key:0},[e[30]||(e[30]=l("b",{style:{color:"red"}},"Possible leak detected!",-1)),l("div",al,[l("table",ol,[l("tr",null,[e[22]||(e[22]=l("th",{style:{border:"1px solid #ccc",padding:"10px"}},"Estimated Leak Point",-1)),t.suspectLocation.leakData.pu_location?(s(),i("th",nl," PU ")):L("",!0),t.suspectLocation.leakData.coordinate?(s(),i("th",sl," Coordinate ")):L("",!0)]),l("tbody",null,[l("tr",null,[l("td",il,b(t.suspectLocation.leakData.leak_point)+" KM ",1),t.suspectLocation.leakData.pu_location?(s(),i("td",rl," KM "+b(t.suspectLocation.leakData.pu_location),1)):L("",!0),t.suspectLocation.leakData.coordinate?(s(),i("td",ul,[e[24]||(e[24]=C(" LatLng: ")),l("code",null,b(t.suspectLocation.leakData.coordinate.latitude+", "+t.suspectLocation.leakData.coordinate.longitude),1),e[25]||(e[25]=l("br",null,null,-1)),e[26]||(e[26]=C(" DMS: ")),l("code",null,b(`${xe(t.suspectLocation.leakData.coordinate.latitude)}, ${xe(t.suspectLocation.leakData.coordinate.longitude)}`),1),e[27]||(e[27]=l("br",null,null,-1)),p(B,{onClick:d=>mt(`LATLNG: ${t.suspectLocation.leakData.coordinate.latitude}, ${t.suspectLocation.leakData.coordinate.longitude}
DMS: ${xe(t.suspectLocation.leakData.coordinate.latitude)}, ${xe(t.suspectLocation.leakData.coordinate.longitude)}`),style:{"margin-top":"5px"},"bt-disabled":!1,"bt-size":"small"},{default:$(()=>[p(n,{icon:"copy"}),e[23]||(e[23]=C(" Copy Coord "))]),_:2},1032,["onClick"])])):L("",!0)])])])]),t.suspectLocation.leakData.coordinate?L("",!0):(s(),i("p",cl,[p(n,{icon:"info-circle"}),e[28]||(e[28]=C(" Map view and PU Location data is currently not supported for this line "))])),p(B,{onClick:d=>nt(t.suspectLocation.leakData.coordinate,t.suspectLocation.leakData.leak_point,t.suspectLocation.leakData.pu_location),"bt-disabled":!t.suspectLocation.leakData.coordinate},{default:$(()=>[p(n,{icon:"map-marker"}),e[29]||(e[29]=C(" Pinpoint on Map"))]),_:2},1032,["onClick","bt-disabled"]),t.suspectLocation.leakData.coordinate?(s(),i("a",{key:1,class:"gmaps",target:"_blank",href:`https://www.google.com/maps?q=${t.suspectLocation.leakData.coordinate.latitude},${t.suspectLocation.leakData.coordinate.longitude}`,style:{"margin-left":"0.5rem"}},"Google Maps",8,dl)):L("",!0)],64)):(s(),i(_,{key:1},[e[31]||(e[31]=l("b",{style:{color:"#555"}},"No leak detected",-1)),l("ol",pl,[(s(!0),i(_,null,P(t.suspectLocation.probabilities,(d,x)=>(s(),i("li",{key:x},b(d),1))),128))])],64))])],64)):(s(),i("h6",vl,[l("b",null,"Analysis on Dataset "+b(u+1),1),e[33]||(e[33]=l("b",{style:{color:"#555"}},"Tidak ada indikasi",-1)),l("ol",yl,[(s(!0),i(_,null,P(t.suspectLocation.probabilities,(d,x)=>(s(),i("li",{key:x},b(d),1))),128))])]))]))),128)):(s(),Ve(Pt,{key:1,message:"Calculating leak probabilities..."}))],4),Q.value?(s(),i("div",{key:0,class:"l-right",style:w({width:Q.value?"60%":"100%",position:"relative"})},[e[36]||(e[36]=l("h4",{style:{"font-weight":"bold"}},"Map View",-1)),e[37]||(e[37]=l("hr",null,null,-1)),p(Be,{latitude:fe.value.latitude,longitude:fe.value.longitude,"leak-point":Ne.value,"pu-location":Ie.value},null,8,["latitude","longitude","leak-point","pu-location"])],4)):L("",!0)],2)])):L("",!0),de.value?(s(),i("div",ml,[l("button",{type:"button",onClick:ut,class:"leak-dismiss"},[p(n,{icon:"close"})]),e[41]||(e[41]=l("h5",{style:{"text-align":"center"}},[l("b",null,"History Data Playback")],-1)),p(o,null,{default:$(()=>[p(ke,{style:{width:"400px"},"in-label":"Speed","model-value":Z.value,"onUpdate:modelValue":e[6]||(e[6]=t=>Z.value=t)},{default:$(()=>e[38]||(e[38]=[l("option",{value:"1000"},"Slowest",-1),l("option",{value:"500"},"Slower",-1),l("option",{value:"300"},"Moderate",-1),l("option",{value:"250"},"Faster",-1),l("option",{value:"200"},"Fastest",-1)])),_:1},8,["model-value"])]),_:1}),l("div",fl,[l("label",bl,[ze(l("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>Pe.value=t),type:"checkbox"},null,512),[[Ke,Pe.value]]),e[39]||(e[39]=C(" Auto-replay "))]),l("label",gl,[ze(l("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>he.value=t),type:"checkbox"},null,512),[[Ke,he.value]]),e[40]||(e[40]=C(" Autoplay on navigating "))])]),l("div",hl,[p(B,{"bt-disabled":!1,onClick:vt},{default:$(()=>[p(n,{icon:"backward"}),C("    "+b(Te.value),1)]),_:1}),l("span",xl,[l("b",null,b(f.value),1)]),p(B,{"bt-disabled":!1,onClick:pt},{default:$(()=>[C(b($e.value)+"    ",1),p(n,{icon:"forward"})]),_:1})]),l("div",{ref_key:"heatMap",ref:Y,style:{width:"100%",height:"600px"}},null,512),l("div",kl,[l("div",wl,[S.value?L("",!0):(s(),i("button",{key:0,onClick:e[9]||(e[9]=t=>S.value=!S.value),class:"controlbtn",type:"button"},[p(n,{icon:"play"})])),S.value?(s(),i("button",{key:1,onClick:e[10]||(e[10]=t=>S.value=!S.value),class:"controlbtn",type:"button"},[p(n,{icon:"pause"})])):L("",!0)]),l("div",_l,[l("input",{onChange:rt,type:"range",min:0,max:g.value.length,value:h.value,class:"slider"},null,40,Sl),l("span",Cl,[l("span",{class:"slider-track",style:w({width:`${R.value}%`})},null,4)])]),l("div",null,[!S.value&&h.value==g.value.length?(s(),i("button",{key:0,onClick:ge,class:"controlbtn",type:"button"},[p(n,{icon:"undo"})])):L("",!0)])])])):L("",!0),de.value?L("",!0):(s(),i("button",{key:3,type:"button",class:"showplayback",onClick:e[11]||(e[11]=t=>de.value=!de.value)},[p(n,{icon:"play"})])),Le.value?(s(),i("div",Dl,[l("div",Ll,[l("button",{type:"button",onClick:ct,class:"pbp-dismiss"},[p(n,{icon:"close"})]),e[42]||(e[42]=l("h3",null,[l("b",null,"Possible Leak Detected")],-1)),p(Be,{"leak-point":ue.value.suspectLocation.leakData.leak_point,latitude:ue.value.mapsLink.latitude,longitude:ue.value.mapsLink.longitude,"pu-location":ue.value.suspectLocation.leakData.pu_location},null,8,["leak-point","latitude","longitude","pu-location"])])])):L("",!0)],64)}}});export{El as default};
